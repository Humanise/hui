<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="head.js"></script>
	<script type="text/javascript" charset="utf-8">
		hui.ui.context='../../..';
	</script>
	<script charset="utf-8" type="text/javascript" src="../../lib/date.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Window.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Formula.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/LocationField.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/LocationPicker.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/BoundPanel.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/DropDown.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/DateTimeField.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/TextField.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/NumberField.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Button.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Input.js"></script>
</head>
<body>
	<script type="text/javascript">
		var win,formula,
			assert = hui.test.assert,
			now = new Date();

		hui.test.run([
			function() {
				win = hui.ui.Window.create({title:'This is the window title',width:200,padding:10,name:'myWindow'});
				formula = hui.ui.Formula.create({name:'myForm'});
				win.add(formula);
				win.show();
				assert.equals(hui.ui.get('myForm'),formula,'Could get form by name');
				formula.buildGroup(null,[
					{type:'TextField',options:{name:'textField',key:'text',value:'This is some text',label:'Text label'}},
					{type:'DateTimeField',options:{key:'date',value:now,label:'Date label'}},
					{type:'NumberField',options:{key:'number',value:10.56,label:'Number label'}},
					{type:'DropDown',options:{key:'drop',value:'da',label:'Drop label',items:[{value:'da',label:'Danish'},{value:'en',title:'English'},{value:'abc',title:'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'}]}},
					{type:'LocationField',options:{key:'location',value:{latitude:57.535354,longitude:10.7428479},label:'Location label'}}
				]);
			},
			function() {
				var values = formula.getValues();
				assert.equals(values.text,'This is some text','The text field has value');
				assert.equals(values.date,now,'The date field has value');
				assert.equals(values.number,10.56,'The number field has value');
				assert.equals(values.drop,'da','The drop down has value');
				assert.equals(values.location.latitude,57.535354,'The latitude has value');
				assert.equals(values.location.longitude,10.7428479,'The longitude has value');
			},
			1000,
			function() {
				hui.test.click(hui.get.firstByClass(document.body,'hui_numberfield_up'));
				assert.equals(formula.getValues().number,11.56,'The number field has incremented value');
				hui.test.click(hui.get.firstByClass(document.body,'hui_numberfield_down'));
				assert.equals(formula.getValues().number,10.56,'The number field has decremented value');
			},
			function() {
				var textField = hui.ui.get('textField');
				var node = textField.getElement();
				var input = hui.get.firstByTag(node,'input');
				assert.defined(input,'The field must have an input element');
				textField.reset();
				assert.equals(textField.getValue(),'','The value of the text field is ""');
				hui.test.type(input,'hep hey',function() {
					assert.equals(textField.getValue(),'hep hey','The text field has updated its value');
				});
			}
		]);
	</script>
</body>
</html>