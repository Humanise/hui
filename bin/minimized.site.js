var hui={browser:{},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45};(function(b,c,d){b.msie=!/opera/i.test(c)&&/MSIE/.test(c)||/Trident/.test(c);b.msie6=c.indexOf("MSIE 6")!==-1;b.msie7=c.indexOf("MSIE 7")!==-1;b.msie8=c.indexOf("MSIE 8")!==-1;b.msie9=c.indexOf("MSIE 9")!==-1;b.msie9compat=b.msie7&&c.indexOf("Trident/5.0")!==-1;b.msie10=c.indexOf("MSIE 10")!==-1;b.msie11=c.indexOf("Trident/7.0")!==-1;b.webkit=c.indexOf("WebKit")!==-1;b.safari=c.indexOf("Safari")!==-1;b.webkitVersion=null;b.gecko=!b.webkit&&!b.msie&&c.indexOf("Gecko")!==-1;b.ipad=b.webkit&&c.indexOf("iPad")!==-1;b.windows=c.indexOf("Windows")!==-1;b.opacity=!b.msie6&&!b.msie7&&!b.msie8;b.mediaQueries=b.opacity;b.animation=!b.msie6&&!b.msie7&&!b.msie8&&!b.msie9;b.wordbreak=!b.msie6&&!b.msie7&&!b.msie8;b.touch=(!!("ontouchstart" in d)||(!!("onmsgesturechange" in d)&&!!d.navigator.maxTouchPoints))?true:false;var a=/Safari\/([\d.]+)/.exec(c);if(a){b.webkitVersion=parseFloat(a[1])}})(hui.browser,navigator.userAgent,window);hui.log=function(a){try{if(arguments.length==1){console.log(a)}else{if(arguments.length==2){console.log(arguments[0],arguments[1])}else{console.log(arguments)}}}catch(b){}};hui.defer=function(a,b){if(b){a=a.bind(b)}window.setTimeout(a)};hui.override=function(b,a){if(a){for(var c in a){b[c]=a[c]}}return b};hui.each=function(a,d){var c;if(hui.isArray(a)){for(c=0;c<a.length;c++){d(a[c],c)}}else{if(a instanceof NodeList){for(c=0;c<a.length;c++){d(a.item(c),c)}}else{for(var b in a){d(b,a[b])}}}};hui.when=function(b,a){return b?a:""};hui.intOrString=function(b){if(hui.isDefined(b)){var a=/[0-9]+/.exec(b);if(a!==null&&a[0]==b){if(parseInt(b,10)==b){return parseInt(b,10)}}}return b};hui.between=function(c,d,b){var a=Math.min(b,Math.max(c,d));return isNaN(a)?c:a};hui.fit=function(f,b,c){c=c||{};var e=f.width/f.height;var g=b.width/b.height;var d,a;if(c.upscale===false&&f.width<=b.width&&f.height<=b.height){d=f.width;a=f.height}else{if(e>g){d=b.width;a=Math.round(b.width/f.width*f.height)}else{d=Math.round(b.height/f.height*f.width);a=b.height}}return{width:d,height:a}};hui.isBlank=function(a){if(a===null||typeof(a)==="undefined"||a===""){return true}return typeof(a)=="string"&&hui.string.trim(a).length===0};hui.isDefined=function(a){return a!==null&&typeof(a)!=="undefined"};hui.isString=function(a){return typeof(a)==="string"};hui.isArray=function(a){if(a===null||a===undefined){return false}if(a.constructor==Array){return true}else{return Object.prototype.toString.call(a)==="[object Array]"}};hui.string={startsWith:function(a,b){if(typeof(a)!=="string"||typeof(b)!=="string"){return false}return(a.match("^"+b)==b)},endsWith:function(b,a){if(typeof(b)!=="string"||typeof(a)!=="string"){return false}return(b.match(a+"$")==a)},camelize:function(f){if(f.indexOf("-")==-1){return f}var d=f.split("-");var b=f.indexOf("-")===0?d[0].charAt(0).toUpperCase()+d[0].substring(1):d[0];for(var c=1,a=d.length;c<a;c++){var e=d[c];b+=e.charAt(0).toUpperCase()+e.substring(1)}return b},trim:function(a){if(a===null||a===undefined){return""}if(typeof(a)!="string"){a=String(a)}return a.replace(/^[\s\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]+|[\s\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000]+$/g,"")},wrap:function(a){if(a===null||a===undefined){return""}return a.split("").join("\u200B")},shorten:function(b,a){if(!hui.isDefined(b)){return""}if(b.length>a){return b.substring(0,a-3)+"..."}return b},escapeHTML:function(a){if(a===null||a===undefined){return""}return hui.build("div",{text:a}).innerHTML},escape:function(b){if(!hui.isString(b)){return b}var a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};return b.replace(/[&<>'`"]/g,function(c){return a[c]||c})},fromJSON:function(a){try{return JSON.parse(a)}catch(b){hui.log(b);return null}},toJSON:function(a){return JSON.stringify(a)}};hui.array={add:function(a,c){if(c.constructor==Array){for(var b=0;b<c.length;b++){if(!hui.array.contains(a,c[b])){a.push(c)}}}else{if(!hui.array.contains(a,c)){a.push(c)}}},contains:function(a,b){return hui.array.indexOf(a,b)!==-1},flip:function(a,b){if(hui.array.contains(a,b)){hui.array.remove(a,b)}else{a.push(b)}},remove:function(a,c){for(var b=a.length-1;b>=0;b--){if(a[b]==c){a.splice(b,1)}}},indexOf:function(a,c){for(var b=0;b<a.length;b++){if(a[b]===c){return b}}return -1},toIntegers:function(b){var c=b.split(",");for(var a=c.length-1;a>=0;a--){c[a]=parseInt(c[a],10)}return c}};hui.dom={isElement:function(b,a){return b.nodeType==1&&(a===undefined?true:b.nodeName.toLowerCase()==a)},isDefinedText:function(a){return a.nodeType==3&&a.nodeValue.length>0},addText:function(a,b){a.appendChild(document.createTextNode(b))},firstChild:function(c){var b=c.childNodes;for(var a=0;a<b.length;a++){if(b[a].nodeType==1){return b[a]}}return null},parseToNode:function(a){var b=hui.build("div",{html:a});return hui.get.firstChild(b,"table")},clear:function(c){var b=c.childNodes;for(var a=b.length-1;a>=0;a--){b[a].parentNode.removeChild(b[a])}},remove:function(a){if(a.parentNode){a.parentNode.removeChild(a)}},replaceNode:function(b,a){if(a.parentNode){a.parentNode.removeChild(a)}b.parentNode.insertBefore(a,b);b.parentNode.removeChild(b)},changeTag:function(d,b){var c=hui.build(b);while(d.firstChild){c.appendChild(d.firstChild)}for(var a=d.attributes.length-1;a>=0;--a){c.attributes.setNamedItem(d.attributes[a].cloneNode())}d.parentNode.insertBefore(c,d);d.parentNode.removeChild(d);return c},insertBefore:function(b,a){b.parentNode.insertBefore(a,b)},insertAfter:function(c,a){var b=c.nextSibling;if(b){b.parentNode.insertBefore(a,b)}else{c.parentNode.appendChild(a)}},replaceHTML:function(b,a){b=hui.get(b);b.innerHTML=a},runScripts:function(node){if(hui.dom.isElement(node)){if(hui.dom.isElement(node,"script")){eval(node.innerHTML)}else{var scripts=node.getElementsByTagName("script");for(var i=0;i<scripts.length;i++){eval(scripts[i].innerHTML)}}}},setText:function(d,e){if(e===undefined||e===null){e=""}var f=d.childNodes;var a=false;for(var b=f.length-1;b>=0;b--){if(!a&&f[b].nodeType===3){f[b].nodeValue=e;a=true}else{d.removeChild(f[b])}}if(!a){hui.dom.addText(d,e)}},getText:function(d){var a="";var e=d.childNodes;for(var b=0;b<e.length;b++){if(e[b].nodeType===3&&e[b].nodeValue!==null){a+=e[b].nodeValue}else{if(e[b].nodeType==1){a+=hui.dom.getText(e[b])}}}return a},isVisible:function(a){while(a){if(a.style&&(hui.style.get(a,"display")==="none"||hui.style.get(a,"visibility")==="hidden")){return false}a=a.parentNode}return true},isDescendantOrSelf:function(a,b){while(a){if(a==b){return true}a=a.parentNode}return false}};hui.form={getValues:function(c){var d={};var a=c.getElementsByTagName("input");for(var b=0;b<a.length;b++){if(hui.isDefined(a[b].name)){d[a[b].name]=a[b].value}}return d}};hui.get=function(a){if(typeof(a)=="string"){return document.getElementById(a)}return a};hui.get.children=function(d){var c=[];var a=d.childNodes;for(var b=0;b<a.length;b++){if(hui.dom.isElement(a[b])){c.push(a[b])}}return c};hui.get.ancestors=function(a){var c=[];var b=a.parentNode;while(b){c[c.length]=b;b=b.parentNode}return c};hui.get.firstAncestorByClass=function(a,b){while(a){if(hui.cls.has(a,b)){return a}a=a.parentNode}return null};hui.get.next=function(a){if(!a){return null}if(a.nextElementSibling){return a.nextElementSibling}if(!a.nextSibling){return null}var b=a.nextSibling;while(b&&b.nodeType!=1){b=b.nextSibling}if(b&&b.nodeType==1){return b}return null};hui.get.previous=function(a){if(!a){return null}if(a.previousElementSibling){return a.previousElementSibling}if(!a.previousSibling){return null}var b=a.previousSibling;while(b&&b.nodeType!=1){b=b.previousSibling}if(b&&b.nodeType==1){return b}return null};hui.get.before=function(c){var d=[];if(c){var a=c.parentNode.childNodes;for(var b=0;b<a.length;b++){if(a[b]==c){break}else{if(a[b].nodeType===1){d.push(a[b])}}}}return d};hui.get.after=function(a){var c=[];var b=hui.get.next(a);while(b){c.push(b);b=hui.get.next(b)}return c};hui.get.firstByClass=function(b,e,a){b=hui.get(b)||document.body;if(b.querySelector){return b.querySelector((a?a+".":".")+e)}else{var d=b.getElementsByTagName(a||"*");for(var c=0;c<d.length;c++){if(hui.cls.has(d[c],e)){return d[c]}}}return null};hui.get.byClass=function(d,h,a){d=hui.get(d)||document.body;var g;if(d.querySelectorAll){var c=d.querySelectorAll((a?a+".":".")+h);var b=[];for(g=0,ll=c.length;g!=ll;b.push(c[g++])){}return b}else{var f=d.getElementsByTagName(a||"*"),e=[];for(g=0;g<f.length;g++){if(hui.cls.has(f[g],h)){e[e.length]=f[g]}}return e}};hui.get.byTag=function(e,c){var b=e.getElementsByTagName(c),a=[];for(var d=0,f=b.length;d!=f;a.push(b[d++])){}return a};hui.get.byId=function(d,f){var b=d.childNodes;for(var a=b.length-1;a>=0;a--){if(b[a].nodeType===1&&b[a].getAttribute("id")===f){return b[a]}else{var c=hui.get.byId(b[a],f);if(c){return c}}}return null};hui.get.firstParentByTag=function(c,a){var b=c;while(b){if(b.tagName&&b.tagName.toLowerCase()==a){return b}b=b.parentNode}return null};hui.get.firstParentByClass=function(c,a){var b=c;while(b){if(hui.cls.has(b)){return b}b=b.parentNode}return null};hui.get.firstByTag=function(c,a){c=hui.get(c)||document.body;if(c.querySelector&&a!=="*"){return c.querySelector(a)}var b=c.getElementsByTagName(a);return b[0]};hui.get.firstChild=hui.dom.firstChild;hui.find=function(a,b){return(b||document).querySelector(a)};hui.collect=function(b,a){var c={};for(key in b){c[key]=hui.get.firstByClass(a,b[key])}return c};hui.build=function(b,a,d){d=d||document;var c=d.createElement(b);if(a){for(var f in a){if(f=="text"){c.appendChild(d.createTextNode(a.text))}else{if(f=="html"){c.innerHTML=a.html}else{if(f=="parent"&&hui.isDefined(a.parent)){a.parent.appendChild(c)}else{if(f=="parentFirst"){if(a.parentFirst.childNodes.length===0){a.parentFirst.appendChild(c)}else{a.parentFirst.insertBefore(c,a.parentFirst.childNodes[0])}}else{if(f=="before"){a.before.parentNode.insertBefore(c,a.before)}else{if(f=="className"){c.className=a.className}else{if(f=="class"){c.className=a["class"]}else{if(f=="style"&&typeof(a[f])=="object"){hui.style.set(c,a[f])}else{if(f=="style"&&(hui.browser.msie7||hui.browser.msie6)){c.style.setAttribute("cssText",a[f])}else{if(hui.isDefined(a[f])){c.setAttribute(f,a[f])}}}}}}}}}}}}return c};hui.position={getTop:function(a){a=hui.get(a);if(a){var b=a.offsetTop,c=a.offsetParent;while(c!==null){b+=c.offsetTop;c=c.offsetParent}return b}else{return 0}},getLeft:function(a){a=hui.get(a);if(a){var b=a.offsetLeft,c=a.offsetParent;while(c!==null){b+=c.offsetLeft;c=c.offsetParent}return b}else{return 0}},get:function(a){return{left:hui.position.getLeft(a),top:hui.position.getTop(a)}},getScrollOffset:function(a){a=hui.get(a);var c=0,b=0;do{c+=a.scrollTop||0;b+=a.scrollLeft||0;a=a.parentNode;if(a.tagName==="HTML"){break}}while(a);return{top:c,left:b}},place:function(j){var b=0,g=0,a=hui.get(j.source.element),e=hui.get(j.target.element),d={left:hui.position.getLeft(e),top:hui.position.getTop(e)};b=d.left+e.clientWidth*(j.target.horizontal||0);g=d.top+e.clientHeight*(j.target.vertical||0);b-=a.clientWidth*(j.source.horizontal||0);g-=a.clientHeight*(j.source.vertical||0);if(j.top){g+=j.top}if(j.left){b+=j.left}if(j.insideViewPort){var h=hui.window.getViewWidth();if(b+a.clientWidth>h){b=h-a.clientWidth-(j.viewPartMargin||0)}if(b<0){b=0}if(g<0){g=0}var i=hui.window.getViewHeight();var f=hui.window.getScrollTop()+hui.window.getViewHeight()-a.clientHeight,c=hui.window.getScrollTop();g=Math.max(Math.min(g,f),c)}a.style.top=Math.round(g)+"px";a.style.left=Math.round(b)+"px"},getRemainingHeight:function(d){var a=d.parentNode.clientHeight;var e=d.parentNode.childNodes;for(var c=0;c<e.length;c++){var b=e[c];if(b!==d&&hui.dom.isElement(e[c])){if(hui.style.get(b,"position")!="absolute"){a-=b.offsetHeight}}}return a}};hui.window={getScrollTop:function(){if(window.pageYOffset){return window.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}else{if(document.body){return document.body.scrollTop}}}return 0},getScrollLeft:function(){if(window.pageYOffset){return window.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollLeft}else{if(document.body){return document.body.scrollLeft}}}return 0},scrollTo:function(i){i=hui.override({duration:0,top:0},i);var c=i.element;var g=hui.position.get(c);var e=hui.window.getScrollTop();var d=hui.window.getViewHeight();var f=e+d;if(e<g.top+c.clientHeight||(g.top)<f){var h=g.top-Math.round((d-c.clientHeight)/2);h-=i.top/2;h=Math.max(0,h);var a=new Date().getTime();var b;b=function(){var j=(new Date().getTime()-a)/i.duration;if(j>1){j=1}window.scrollTo(0,e+Math.round((h-e)*hui.ease.fastSlow(j)));if(j<1){window.setTimeout(b)}};b()}},getViewHeight:function(){if(window.innerHeight){return window.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){return document.documentElement.clientHeight}else{if(document.body){return document.body.clientHeight}}}},getViewWidth:function(){if(window.innerWidth){return window.innerWidth}else{if(document.documentElement&&document.documentElement.clientWidth){return document.documentElement.clientWidth}else{if(document.body){return document.body.clientWidth}}}}};hui.cls={has:function(d,e){d=hui.get(d);if(!d||!d.className){return false}if(d.hasClassName){return d.hasClassName(e)}if(d.className==e){return true}var b=d.className.split(/\s+/);for(var c=0;c<b.length;c++){if(b[c]==e){return true}}return false},add:function(a,b){a=hui.get(a);if(!a){return}if(a.addClassName){a.addClassName(b)}hui.cls.remove(a,b);a.className+=" "+b},remove:function(e,f){e=hui.get(e);if(!e||!e.className){return}if(e.removeClassName){e.removeClassName(f)}if(e.className==f){e.className="";return}var c="";var b=e.className.split(/\s+/);for(var d=0;d<b.length;d++){if(b[d]!=f){if(d>0){c+=" "}c+=b[d]}}e.className=c},toggle:function(a,b){if(hui.cls.has(a,b)){hui.cls.remove(a,b)}else{hui.cls.add(a,b)}},set:function(a,b,c){if(c){hui.cls.add(a,b)}else{hui.cls.remove(a,b)}}};hui.listen=function(b,c,d,a){b=hui.get(b);if(!b){return}if(document.addEventListener){b.addEventListener(c,d,a?true:false)}else{b.attachEvent("on"+c,d)}};hui.listenOnce=function(a,b,d){var c=null;c=function(f){hui.unListen(a,b,c);d(f)};hui.listen(a,b,c)};hui.unListen=function(c,b,d,a){c=hui.get(c);if(document.removeEventListener){c.removeEventListener(b,d,a?true:false)}else{c.detachEvent("on"+b,d)}};hui.event=function(a){if(a!==undefined&&a.huiEvent===true){return a}return new hui.Event(a)};hui.Event=function(a){this.huiEvent=true;this.event=a=a||window.event;if(!a){hui.log("No event")}this.element=a.target?a.target:a.srcElement;this.shiftKey=a.shiftKey;this.altKey=a.altKey;this.metaKey=a.metaKey;this.returnKey=a.keyCode==13;this.escapeKey=a.keyCode==27;this.spaceKey=a.keyCode==32;this.backspaceKey=a.keyCode==8;this.upKey=a.keyCode==38;this.downKey=a.keyCode==40;this.leftKey=a.keyCode==37;this.rightKey=a.keyCode==39;this.keyCode=a.keyCode};hui.Event.prototype={getLeft:function(){var a=0;if(this.event){if(this.event.pageX){a=this.event.pageX}else{if(this.event.clientX){a=this.event.clientX+hui.window.getScrollLeft()}}}return a},getTop:function(){var a=0;if(this.event){if(this.event.pageY){a=this.event.pageY}else{if(this.event.clientY){a=this.event.clientY+hui.window.getScrollTop()}}}return a},getElement:function(){return this.element},findByClass:function(a){return hui.get.firstAncestorByClass(this.element,a)},findByTag:function(a){var b=this.element;while(b){if(b.tagName&&b.tagName.toLowerCase()==a){return b}b=b.parentNode}return null},find:function(b){var a=this.element;while(a){if(a.tagName&&a.tagName.toLowerCase()==tag){if(b(a)){return a}}a=a.parentNode}return null},isDescendantOf:function(b){var a=this.element;while(a){if(a===b){return true}a=a.parentNode}return false},stop:function(){hui.stop(this.event)}};hui.stop=function(a){if(!a){a=window.event}if(a.stopPropagation){a.stopPropagation()}if(a.preventDefault){a.preventDefault()}a.cancelBubble=true;a.stopped=true};hui._defered=[];hui._ready=document.readyState=="complete";hui.onReady=function(a){if(hui._ready){a()}else{hui._defered.push(a)}if(hui._defered.length==1){hui._onReady(function(){hui._ready=true;for(var b=0;b<hui._defered.length;b++){hui._defered[b]()}hui._defered=null})}};hui._onReady=function(a){if(window.addEventListener){window.addEventListener("DOMContentLoaded",a,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",a,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",a)}else{if(typeof window.onload=="function"){var b=window.onload;window.onload=function(){b();a()}}else{window.onload=a}}}}};hui.request=function(c){c=hui.override({method:"POST",async:true,headers:{Ajax:true}},c);var g=new XMLHttpRequest();if(!g){return}g.onreadystatechange=function(){try{if(g.readyState==4){if(g.status==200&&c.$success){c.$success(g)}else{if(g.status==403&&c.$forbidden){c.$forbidden(g)}else{if(g.status!==0&&c.$failure){c.$failure(g)}else{if(g.status===0&&c.$abort){c.$abort(g)}}}}if(c.$finally){c.$finally()}}}catch(h){if(c.$exception){c.$exception(h,g)}else{throw h}}};var f=c.method.toUpperCase();g.open(f,c.url,c.async);var a=null;if(f=="POST"&&c.file){if(false){a=c.file;g.setRequestHeader("Content-type",c.file.type);g.setRequestHeader("X_FILE_NAME",c.file.name)}else{a=new FormData();a.append("file",c.file);if(c.parameters){for(var e in c.parameters){a.append(e,c.parameters[e])}}}if(c.$progress){g.upload.addEventListener("progress",function(h){c.$progress(h.loaded,h.total)},false)}if(c.$load){g.upload.addEventListener("load",function(h){c.$load()},false)}}else{if(f=="POST"&&c.files){a=new FormData();for(var d=0;d<c.files.length;d++){a.append("file"+d,c.files[d])}}else{if(f=="POST"&&c.parameters){a=hui.request._buildPostBody(c.parameters);g.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8")}else{a=""}}}if(c.headers){for(var b in c.headers){g.setRequestHeader(b,c.headers[b])}}g.send(a);return g};hui.request.isXMLResponse=function(a){return a.responseXML&&a.responseXML.documentElement&&a.responseXML.documentElement.nodeName!="parsererror"};hui.request._buildPostBody=function(c){if(!c){return null}var a="",d;if(hui.isArray(c)){for(var b=0;b<c.length;b++){d=c[b];if(b>0){a+="&"}a+=encodeURIComponent(d.name)+"=";if(d.value!==undefined&&d.value!==null){a+=encodeURIComponent(d.value)}}}else{for(d in c){if(a.length>0){a+="&"}a+=encodeURIComponent(d)+"=";if(c[d]!==undefined&&c[d]!==null){a+=encodeURIComponent(c[d])}}}return a};hui.style={copy:function(e,f,b){for(var a=0;a<b.length;a++){var d=b[a];var c=hui.style.get(e,d);if(c){f.style[hui.string.camelize(d)]=c}}},set:function(a,c){for(var b in c){if(b==="transform"){a.style.webkitTransform=c[b]}else{if(b==="opacity"){hui.style.setOpacity(a,c[b])}else{a.style[b]=c[b]}}}},get:function(b,c){b=hui.get(b);var e=hui.string.camelize(c);var d=b.style[e];if(!d){if(document.defaultView&&document.defaultView.getComputedStyle){var a=document.defaultView.getComputedStyle(b,null);d=a?a.getPropertyValue(c):null}else{if(b.currentStyle){d=b.currentStyle[e]}}}if(window.opera&&hui.array.contains(["left","top","right","bottom"],c)){if(hui.style.get(b,"position")=="static"){d="auto"}}return d=="auto"?"":d},setOpacity:function(b,a){if(!hui.browser.opacity){if(a==1){b.style.filter=null}else{b.style.filter="alpha(opacity="+(a*100)+")"}}else{b.style.opacity=a}},length:function(a){if(typeof(a)==="number"){return a+"px"}return a}};hui.frame={getDocument:function(a){if(a.contentDocument){return a.contentDocument}else{if(a.contentWindow){return a.contentWindow.document}else{if(a.document){return a.document}}}},getWindow:function(a){if(a.defaultView){return a.defaultView}else{if(a.contentWindow){return a.contentWindow}}}};hui.selection={clear:function(){var a;if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){a=window.getSelection();if(a&&a.removeAllRanges){a.removeAllRanges()}}}},getText:function(a){a=a||document;if(a.getSelection){return a.getSelection()+""}else{if(a.selection){return a.selection.createRange().text}}return""},getNode:function(b){b=b||document;if(b.getSelection){var a=b.getSelection().getRangeAt(0);if(typeof(a.commonAncestorContainer)=="function"){return a.commonAncestorContainer()}return a.commonAncestorContainer}return null},get:function(a){return{node:hui.selection.getNode(a),text:hui.selection.getText(a)}},enable:function(a){document.onselectstart=a?null:function(){return false};document.body.style.webkitUserSelect=a?null:"none"}};hui.effect={makeFlippable:function(a){if(hui.browser.webkit){hui.cls.add(a.container,"hui_flip_container");hui.cls.add(a.front,"hui_flip_front");hui.cls.add(a.back,"hui_flip_back")}else{hui.cls.add(a.front,"hui_flip_front_legacy");hui.cls.add(a.back,"hui_flip_back_legacy")}},flip:function(b){if(!hui.browser.webkit){hui.cls.toggle(b.element,"hui_flip_flipped_legacy")}else{var c=hui.get(b.element);var e=b.duration||"1s";var d=hui.get.firstByClass(c,"hui_flip_front");var a=hui.get.firstByClass(c,"hui_flip_back");d.style.webkitTransitionDuration=e;a.style.webkitTransitionDuration=e;hui.cls.toggle(b.element,"hui_flip_flipped")}},bounceIn:function(a){var b=a.element;if(hui.browser.msie){hui.style.set(b,{display:"block",visibility:"visible"})}else{hui.style.set(b,{display:"block",opacity:0,visibility:"visible"});hui.animate(b,"transform","scale(0.1)",0);window.setTimeout(function(){hui.animate(b,"opacity",1,300);hui.animate(b,"transform","scale(1)",400,{ease:hui.ease.backOut})})}},fadeIn:function(a){var b=a.element;if(hui.style.get(b,"display")=="none"){hui.style.set(b,{opacity:0,display:"inherit"})}hui.animate({node:b,css:{opacity:1},delay:a.delay||null,duration:a.duration||500,$complete:a.onComplete||a.$complete})},fadeOut:function(a){hui.animate({node:a.element,css:{opacity:0},delay:a.delay||null,duration:a.duration||500,hideOnComplete:true,complete:a.onComplete||a.$complete})},wiggle:function(a){var b=hui.ui.getElement(a.element);hui.cls.add(a.element,"hui_effect_wiggle");window.setTimeout(function(){hui.cls.remove(a.element,"hui_effect_wiggle")},a.duration||1000)},shake:function(a){var b=hui.ui.getElement(a.element);hui.cls.add(a.element,"hui_effect_shake");window.setTimeout(function(){hui.cls.remove(a.element,"hui_effect_shake")},a.duration||1000)}};hui.document={getWidth:function(){return Math.max(document.body.clientWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth)},getHeight:function(){if(hui.browser.msie6){var a=Math.max(document.body.clientHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight);var c=document.body.childNodes;for(var b=0;b<c.length;b++){if(hui.dom.isElement(c[b])){a=Math.max(a,c[b].clientHeight)}}return a}if(window.scrollMaxY&&window.innerHeight){return window.scrollMaxY+window.innerHeight}else{return Math.max(document.body.clientHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight)}}};hui.drag={register:function(a){var b=a.touch&&hui.browser.touch;hui.listen(a.element,b?"touchstart":"mousedown",function(c){c=hui.event(c);if(a.$check&&a.$check(c)===false){return}c.stop();hui.drag.start(a,c)})},start:function(j,d){var f=hui.browser.msie?document:window;var c=j.touch&&hui.browser.touch;if(j.onStart){j.onStart()}var b={x:d.getLeft(),y:d.getTop(),time:Date.now()};var g=b;var a,i,h=false;a=function(k){k=hui.event(k);k.stop(k);if(!h&&j.onBeforeMove){j.onBeforeMove(k)}h=true;j.onMove(k)}.bind(this);hui.listen(f,c?"touchmove":"mousemove",a);i=function(){hui.unListen(f,c?"touchmove":"mousemove",a);hui.unListen(f,c?"touchend":"mouseup",i);if(j.onEnd){j.onEnd()}if(h&&j.onAfterMove){j.onAfterMove()}if(!h&&j.onNotMoved){j.onNotMoved()}hui.selection.enable(true)}.bind(this);hui.listen(f,c?"touchend":"mouseup",i);hui.selection.enable(false)},_nativeListeners:[],_activeDrop:null,listen:function(a){if(hui.browser.msie){return}hui.drag._nativeListeners.push(a);if(hui.drag._nativeListeners.length>1){return}hui.listen(document.body,"dragenter",function(g){var b=hui.drag._nativeListeners;var f=null;for(var d=0;d<b.length;d++){var c=b[d].element;if(hui.dom.isDescendantOrSelf(g.target,c)){f=b[d];if(hui.drag._activeDrop===null||hui.drag._activeDrop!=f){hui.cls.add(c,f.hoverClass)}break}}if(hui.drag._activeDrop){if(hui.drag._activeDrop!=f){hui.cls.remove(hui.drag._activeDrop.element,hui.drag._activeDrop.hoverClass);if(hui.drag._activeDrop.$leave){hui.drag._activeDrop.$leave(g)}}else{if(hui.drag._activeDrop.$hover){hui.drag._activeDrop.$hover(g)}}}hui.drag._activeDrop=f});hui.listen(document.body,"dragover",function(b){hui.stop(b);if(hui.drag._activeDrop){if(hui.drag._activeDrop.$hover){hui.drag._activeDrop.$hover(b)}}});hui.listen(document.body,"dragend",function(b){hui.log("drag end")});hui.listen(document.body,"dragstart",function(b){hui.log("drag start")});hui.listen(document.body,"drop",function(g){var f=hui.event(g);f.stop();var c=hui.drag._activeDrop;hui.drag._activeDrop=null;if(c){hui.cls.remove(c.element,c.hoverClass);if(c.$drop){c.$drop(g,{event:f})}if(g.dataTransfer){hui.log(g.dataTransfer.types);if(c.$dropFiles&&g.dataTransfer.files&&g.dataTransfer.files.length>0){c.$dropFiles(g.dataTransfer.files,{event:f})}else{if(c.$dropURL&&g.dataTransfer.types!==null&&(hui.array.contains(g.dataTransfer.types,"public.url")||hui.array.contains(g.dataTransfer.types,"text/uri-list"))){var b=g.dataTransfer.getData("public.url");var d=g.dataTransfer.getData("text/uri-list");if(b&&!hui.string.startsWith(b,"data:")){c.$dropURL(b,{event:f})}else{if(d&&!hui.string.startsWith(b,"data:")){c.$dropURL(d,{event:f})}}}else{if(c.$dropText&&g.dataTransfer.types!==null&&hui.array.contains(g.dataTransfer.types,"text/plain")){c.$dropText(g.dataTransfer.getData("text/plain"),{event:f})}}}}}})}};hui.Preloader=function(a){this.options=a||{};this.delegate={};this.images=[];this.loaded=0};hui.Preloader.prototype={addImages:function(a){if(typeof(a)=="object"){for(var b=0;b<a.length;b++){this.images.push(a[b])}}else{this.images.push(a)}},setDelegate:function(a){this.delegate=a},load:function(h){h=h||0;var c=this;this.obs=[];var f=function(){c._imageChanged(this.huiPreloaderIndex,"imageDidLoad")};var g=function(){c._imageChanged(this.huiPreloaderIndex,"imageDidGiveError")};var b=function(){c._imageChanged(this.huiPreloaderIndex,"imageDidAbort")};for(var e=h;e<this.images.length+h;e++){var d=e;if(d>=this.images.length){d=d-this.images.length}var a=new Image();a.huiPreloaderIndex=d;a.onload=f;a.onerror=g;a.onabort=b;a.src=(this.options.context?this.options.context:"")+this.images[d];this.obs.push(a)}},_imageChanged:function(a,b){this.loaded++;if(this.delegate[b]){this.delegate[b](this.loaded,this.images.length,a)}if(this.loaded==this.images.length&&this.delegate.allImagesDidLoad){this.delegate.allImagesDidLoad()}}};hui.cookie={set:function(c,d,e){var a;if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));a="; expires="+b.toGMTString()}else{a=""}document.cookie=c+"="+d+a+"; path=/"},get:function(b){var e=b+"=";var a=document.cookie.split(";");for(var d=0;d<a.length;d++){var f=a[d];while(f.charAt(0)==" "){f=f.substring(1,f.length)}if(f.indexOf(e)===0){return f.substring(e.length,f.length)}}return null},clear:function(a){this.set(a,"",-1)}};hui.location={getParameter:function(a){var c=hui.location.getParameters();for(var b=0;b<c.length;b++){if(c[b].name==a){return c[b].value}}return null},setParameter:function(a,e){var c=hui.location.getParameters();var d=false;for(var b=0;b<c.length;b++){if(c[b].name==a){c[b].value=e;d=true;break}}if(!d){c.push({name:a,value:e})}hui.location.setParameters(c)},hasHash:function(a){var b=document.location.hash;if(b!==""){return b=="#"+a}return false},getHash:function(){var a=document.location.hash;if(a!==""){return a.substring(1)}return null},getHashParameter:function(a){var d=document.location.hash;if(d!==""){var b=d.indexOf(a+"=");if(b!==-1){var c=d.substring(b+a.length+1);if(c.indexOf("&")!==-1){return c.substring(0,c.indexOf("&"))}return c}}return null},clearHash:function(){document.location.hash="#"},setParameters:function(b){var c="";for(var a=0;a<b.length;a++){c+=a===0?"?":"&";c+=b[a].name+"="+b[a].value}document.location.search=c},getBoolean:function(a){var b=hui.location.getParameter(a);return(b=="true"||b=="1")},getInt:function(a){var b=parseInt(hui.location.getParameter(a));if(!isNaN(b)){return b}return null},getParameters:function(){var b=document.location.search.substring(1).split("&");var a=[];for(var d=0;d<b.length;d++){var e=b[d].split("=");var c=unescape(e[0]).replace(/^\s*|\s*$/g,"");var f=unescape(e[1]).replace(/^\s*|\s*$/g,"");if(c){a.push({name:c,value:f})}}return a}};if(window.define){define("hui",hui)}hui.animate=function(a,e,d,f,b){if(typeof(a)=="string"||hui.dom.isElement(a)){hui.animation.get(a).animate(null,d,e,f,b)}else{var c=hui.animation.get(a.node);if(a.property){c.animate(null,a.value,a.property,a.duration,a)}else{if(!a.css){c.animate(null,"","",a.duration,a)}else{var g=a;for(var h in a.css){c.animate(null,a.css[h],h,a.duration,g);g=hui.override({},a);g.$complete=undefined}}}}};hui.animation={objects:{},running:false,latestId:0,get:function(a){a=hui.get(a);if(!a.huiAnimationId){a.huiAnimationId=this.latestId++}if(!this.objects[a.huiAnimationId]){this.objects[a.huiAnimationId]=new hui.animation.Item(a)}return this.objects[a.huiAnimationId]},start:function(){if(!this.running){hui.animation._render()}}};hui.animation._lengthUpater=function(c,b,a){c.style[a.property]=(a.from+(a.to-a.from)*b)+(a.unit!=null?a.unit:"")};hui.animation._transformUpater=function(d,b,a){var c=a.transform;var e="";if(c.rotate){e+=" rotate("+(c.rotate.from+(c.rotate.to-c.rotate.from)*b)+c.rotate.unit+")"}if(c.scale){e+=" scale("+(c.scale.from+(c.scale.to-c.scale.from)*b)+")"}d.style[hui.animation.TRANSFORM]=e};hui.animation._colorUpater=function(d,c,b){var f=Math.round(b.from.red+(b.to.red-b.from.red)*c);var e=Math.round(b.from.green+(b.to.green-b.from.green)*c);var a=Math.round(b.from.blue+(b.to.blue-b.from.blue)*c);value="rgb("+f+","+e+","+a+")";d.style[b.property]=value};hui.animation._propertyUpater=function(c,b,a){c[a.property]=Math.round(a.from+(a.to-a.from)*b)};hui.animation._ieOpacityUpdater=function(d,b,a){var c=(a.from+(a.to-a.from)*b);if(c==1){d.style.removeAttribute("filter")}else{d.style.filter="alpha(opacity="+(c*100)+")"}};hui.animation._render=function(){hui.animation.running=true;var g=false,a=Date.now();for(var b in hui.animation.objects){var d=hui.animation.objects[b];if(d.work){var e=d.element;for(var f=0;f<d.work.length;f++){var h=d.work[f];if(h.finished){continue}var c=(a-h.start)/(h.end-h.start);if(c<0){g=true;continue}else{if(isNaN(c)||c>1){c=1}else{if(c<1){g=true}}}var k=c,j=null;if(h.delegate&&h.delegate.ease){k=h.delegate.ease(k)}if(h.delegate&&h.delegate.$render){h.delegate.$render(e,k)}else{if(h.delegate&&h.delegate.callback){h.delegate.callback(e,k)}else{if(h.updater){h.updater(e,k,h)}}}if(c==1){h.finished=true;if(h.delegate&&h.delegate.$complete){window.setTimeout(h.delegate.$complete)}else{if(h.delegate&&h.delegate.onComplete){window.setTimeout(h.delegate.onComplete)}else{if(h.delegate&&h.delegate.hideOnComplete){e.style.display="none"}}}}}}}if(g){window.requestAnimationFrame(hui.animation._render)}else{hui.animation.running=false}};hui.animation._parseStyle=function(d){var b={type:null,value:null,unit:null};var c;if(!hui.isDefined(d)){return b}else{if(!isNaN(d)){b.value=parseFloat(d)}else{if(c=d.match(/([\-]?[0-9\.]+)(px|pt|%)/)){b.type="length";b.value=parseFloat(c[1]);b.unit=c[2]}else{if(c=d.match(/rgb\(([0-9]+),[ ]?([0-9]+),[ ]?([0-9]+)\)/)){b.type="color";b.value={red:parseInt(c[1]),green:parseInt(c[2]),blue:parseInt(c[3])}}else{var a=new hui.Color(d);if(a.ok){b.value={red:a.r,green:a.g,blue:a.b}}}}}}return b};hui.animation.Item=function(a){this.element=a;this.work=[]};hui.animation.Item.prototype.animate=function(h,i,j,b,f){var g=this.getWork(hui.string.camelize(j));g.delegate=f;g.finished=false;var d=!(j=="scrollLeft"||j=="scrollTop"||j=="");if(h!==null){g.from=h}else{if(j=="transform"){g.transform=hui.animation.Item.parseTransform(i,this.element)}else{if(!hui.browser.opacity&&j=="opacity"){g.from=this._getIEOpacity(this.element)}else{if(d){var a=hui.style.get(this.element,j);var c=hui.animation._parseStyle(a);g.from=c.value}else{g.from=this.element[j]}}}}if(d){var e=hui.animation._parseStyle(i);g.to=e.value;g.unit=e.unit;if(!hui.browser.opacity&&j=="opacity"){g.updater=hui.animation._ieOpacityUpdater}else{if(j=="transform"){g.updater=hui.browser.msie?function(){}:hui.animation._transformUpater}else{if(e.type=="color"){g.updater=hui.animation._colorUpater}else{g.updater=hui.animation._lengthUpater}}}}else{g.to=i;g.unit=null;g.updater=hui.animation._propertyUpater}g.start=Date.now();if(f&&f.delay){g.start+=f.delay}g.end=g.start+b;hui.animation.start()};hui.animation.TRANSFORM=hui.browser.gecko?"MozTransform":"WebkitTransform";hui.animation.Item.parseTransform=function(g,d){var i={};var f,e;var h=/rotate\(([0-9\.]+)([a-z]+)\)/i;var c=g.match(h);if(c){f=0;if(d.style[hui.animation.TRANSFORM]){e=d.style[hui.animation.TRANSFORM].match(h);if(e){f=parseFloat(e[1])}}i.rotate={from:f,to:parseFloat(c[1]),unit:c[2]}}var a=/scale\(([0-9\.]+)\)/i;var b=g.match(a);if(b){f=1;if(d.style[hui.animation.TRANSFORM]){e=d.style[hui.animation.TRANSFORM].match(a);if(e){f=parseFloat(e[1])}}i.scale={from:f,to:parseFloat(b[1])}}return i};hui.animation.Item.prototype._getIEOpacity=function(b){var c=hui.style.get(b,"filter").toLowerCase();var a;if(a=c.match(/opacity=([0-9]+)/)){return parseFloat(a[1])/100}else{return 1}};hui.animation.Item.prototype.getWork=function(c){for(var b=this.work.length-1;b>=0;b--){if(this.work[b].property===c){return this.work[b]}}var a={property:c};this.work[this.work.length]=a;return a};hui.animation.Loop=function(a){this.recipe=a;this.position=-1;this.running=false};hui.animation.Loop.prototype.next=function(){this.position++;if(this.position>=this.recipe.length){this.position=0}var b=this.recipe[this.position];if(typeof(b)=="function"){b()}else{if(b.element){hui.animate(b.element,b.property,b.value,b.duration,{ease:b.ease})}}var a=this;var c=b.duration||0;if(b.wait!==undefined){c=b.wait}window.setTimeout(function(){a.next()},c)};hui.animation.Loop.prototype.start=function(){this.running=true;this.next()};hui.ease={slowFastSlow:function(e){var d=1.6;var c=1.4;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(e,d)),Math.pow(Math.PI,c))+1},fastSlow:function(e){var d=0.5;var c=0.7;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(e,d)),Math.pow(Math.PI,c))+1},elastic:function(a){return 1-hui.ease.elastic2(1-a)},elastic2:function(c,b,e){if(c<=0||c>=1){return c}if(!e){e=0.45}var d;if(!b||b<1){b=1;d=e/4}else{d=e/(2*Math.PI)*Math.asin(1/b)}return -(b*Math.pow(2,10*(c-=1))*Math.sin((c-d)*(2*Math.PI)/e))},bounce:function(a){if(a<(1/2.75)){return 7.5625*a*a}else{if(a<(2/2.75)){return(7.5625*(a-=(1.5/2.75))*a+0.75)}else{if(a<(2.5/2.75)){return(7.5625*(a-=(2.25/2.75))*a+0.9375)}else{return(7.5625*(a-=(2.625/2.75))*a+0.984375)}}}},flicker:function(a){if(a==1){return 1}return Math.random()*a},linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return a*(a-2)*-1},quadInOut:function(a){a=a*2;if(a<1){return Math.pow(a,2)/2}return -1*((--a)*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-1,3)+1},cubicInOut:function(a){a=a*2;if(a<1){return Math.pow(a,3)/2}a-=2;return(Math.pow(a,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return -1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a=a*2;if(a<1){return Math.pow(a,4)/2}a-=2;return -1/2*(Math.pow(a,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a=a*2;if(a<1){return Math.pow(a,5)/2}a-=2;return(Math.pow(a,5)+2)/2},sineIn:function(a){return -1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*(Math.PI/2))},sineInOut:function(a){return -1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return(a==0)?0:Math.pow(2,10*(a-1))},expoOut:function(a){return(a==1)?1:(-1*Math.pow(2,-10*a)+1)},expoInOut:function(a){if(a==0){return 0}if(a==1){return 1}a=a*2;if(a<1){return Math.pow(2,10*(a-1))/2}--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return -1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){a=a-1;return Math.sqrt(1-Math.pow(a,2))},circInOut:function(a){a=a*2;if(a<1){return -1/2*(Math.sqrt(1-Math.pow(a,2))-1)}a-=2;return 1/2*(Math.sqrt(1-Math.pow(a,2))+1)},backIn:function(b){var a=1.70158;return Math.pow(b,2)*((a+1)*b-a)},backOut:function(b){b=b-1;var a=1.70158;return Math.pow(b,2)*((a+1)*b+a)+1},backInOut:function(b){var a=1.70158*1.525;b=b*2;if(b<1){return(Math.pow(b,2)*((a+1)*b-a))/2}b-=2;return(Math.pow(b,2)*((a+1)*b+a)+2)/2},elasticIn:function(c){if(c==0){return 0}if(c==1){return 1}var b=0.3;var a=b/4;c=c-1;return -1*Math.pow(2,10*c)*Math.sin((c-a)*(2*Math.PI)/b)},elasticOut:function(c){if(c==0){return 0}if(c==1){return 1}var b=0.3;var a=b/4;return Math.pow(2,-10*c)*Math.sin((c-a)*(2*Math.PI)/b)+1},elasticInOut:function(c){if(c==0){return 0}c=c*2;if(c==2){return 1}var b=0.3*1.5;var a=b/4;if(c<1){c-=1;return -0.5*(Math.pow(2,10*c)*Math.sin((c-a)*(2*Math.PI)/b))}c-=1;return 0.5*(Math.pow(2,-10*c)*Math.sin((c-a)*(2*Math.PI)/b))+1},bounceIn:function(a){return(1-hui.ease.bounceOut(1-a))},bounceOut:function(d){var b=7.5625;var c=2.75;var a;if(d<(1/c)){a=b*Math.pow(d,2)}else{if(d<(2/c)){d-=(1.5/c);a=b*Math.pow(d,2)+0.75}else{if(d<(2.5/c)){d-=(2.25/c);a=b*Math.pow(d,2)+0.9375}else{d-=(2.625/c);a=b*Math.pow(d,2)+0.984375}}}return a},bounceInOut:function(a){if(a<0.5){return hui.ease.bounceIn(a*2)/2}return(hui.ease.bounceOut(a*2-1)/2)+0.5}};if(!Date.now){Date.now=function now(){return new Date().getTime()}}(function(){var b=0;var c=["ms","moz","webkit","o"];for(var a=0;a<c.length&&!window.requestAnimationFrame;++a){window.requestAnimationFrame=window[c[a]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[c[a]+"CancelAnimationFrame"]||window[c[a]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(h,e){var d=Date.now();var f=Math.max(0,16-(d-b));var g=window.setTimeout(function(){h(d+f)},0);b=d+f;return g}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());hui.Color=function(g){this.ok=false;if(hui.isBlank(g)){return}if(g.charAt(0)=="#"){g=g.substr(1,6)}g=g.replace(/ /g,"");g=g.toLowerCase();for(var c in hui.Color.table){if(g==c){g=hui.Color.table[c]}}var h=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(i){return[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]}},{re:/^rgb\((\d{1,3})%,\s*(\d{1,3})%,\s*(\d{1,3})%\)$/,process:function(i){return[Math.round(parseInt(i[1])/100*255),Math.round(parseInt(i[2])/100*255),Math.round(parseInt(i[3])/100*255)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}];for(var b=0;b<h.length;b++){var e=h[b].re,d=h[b].process,f=e.exec(g);if(f){var a=d(f);this.r=a[0];this.g=a[1];this.b=a[2];this.ok=true;break}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b)};hui.Color.prototype={toRGB:function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},isDefined:function(){return !(this.r===undefined||this.g===undefined||this.b===undefined)},toHex:function(){if(!this.isDefined()){return null}var d=this.r.toString(16);var c=this.g.toString(16);var a=this.b.toString(16);if(d.length==1){d="0"+d}if(c.length==1){c="0"+c}if(a.length==1){a="0"+a}return"#"+d+c+a}};hui.Color.table={white:"ffffff",black:"000000",red:"ff0000",green:"00ff00",blue:"0000ff"};hui.Color.hex2rgb=function(d){if(hui.isBlank(d)){return null}if(d[0]=="#"){d=d.substr(1)}if(d.length==3){var a=d;d="";a=/^([a-f0-9])([a-f0-9])([a-f0-9])$/i.exec(a).slice(1);for(var c=0;c<3;c++){d+=a[c]+a[c]}}var b=/^([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i.exec(d).slice(1);return{r:parseInt(b[0],16),g:parseInt(b[1],16),b:parseInt(b[2],16)}};hui.Color.hsv2rgb=function(e,f,d){var m=e/360,j,o,b;if(f==0){j=d*255;o=d*255;b=d*255}else{var k=m*6,c,l,n;var g=Math.floor(k);var a=d*(1-f);var q=d*(1-f*(k-g));var p=d*(1-f*(1-(k-g)));if(g==0){c=d;l=p;n=a}else{if(g==1){c=q;l=d;n=a}else{if(g==2){c=a;l=d;n=p}else{if(g==3){c=a;l=q;n=d}else{if(g==4){c=p;l=a;n=d}else{c=d;l=a;n=q}}}}}j=Math.round(c*255);o=Math.round(l*255);b=Math.round(n*255)}return new Array(j,o,b)};hui.Color.rgb2hsv=function(i,h,c){i=(i/255);h=(h/255);c=(c/255);var e=Math.min(Math.min(i,h),c),a=Math.max(Math.max(i,h),c),j=a,f,d;if(a==e){d=0}else{if(a==i){d=(60*((h-c)/(a-e)))%360}else{if(a==h){d=60*((c-i)/(a-e))+120}else{if(a==c){d=60*((i-h)/(a-e))+240}}}}if(d<0){d+=360}if(a==0){f=0}else{f=1-(e/a)}return[Math.round(d),Math.round(f*100),Math.round(j*100)]};hui.Color.rgb2hex=function(b){var e="#";for(var a=0;a<3;a++){var d=parseInt(b[a]).toString(16);if(d.length<2){d="0"+d}e+=d}return e};!function(g,v,k){var h=v.getElementsByTagName("head")[0],t={},q={},u={},d={},n="string",r=false,i="push",l="DOMContentLoaded",b="readyState",p="addEventListener",o="onreadystatechange",w=function(f,y){for(var x=0,s=f.length;x<s;++x){if(!y(f[x])){return r}}return 1};function e(f,s){w(f,function(x){return !s(x)})}if(!v[b]&&v[p]){v[p](l,function j(){v.removeEventListener(l,j,r);v[b]="complete"},r);v[b]="loading"}var c=function(D,z,x){D=D[i]?D:[D];var s=z&&z.call,y=s?z:x,f=s?D.join(""):z,A=D.length;function B(E){return E.call?E():t[E]}function C(){if(!--A){t[f]=1;y&&y();for(var E in u){w(E.split("|"),B)&&!e(u[E],B)&&(u[E]=[])}}}k(function(){e(D,function(E){if(d[E]){f&&(q[f]=1);C();return}d[E]=1;f&&(q[f]=1);m(c.path?c.path+E+".js":E,C)})},0);return c};function m(y,x){var s=v.createElement("script"),f=r;s.onload=s.onerror=s[o]=function(){if((s[b]&&!(/^c|loade/.test(s[b])))||f){return}s.onload=s[o]=null;f=1;x()};s.async=1;s.src=y;h.insertBefore(s,h.firstChild)}c.get=m;c.ready=function(y,s,x){y=y[i]?y:[y];var f=[];!e(y,function(z){t[z]||f[i](z)})&&w(y,function(z){return t[z]})?s():!function(z){u[z]=u[z]||[];u[z][i](s);x&&x(f)}(y.join("|"));return c};var a=g.$script;c.noConflict=function(){g.$script=a;return this};(typeof module!=="undefined"&&module.exports)?(module.exports=c):(g.hui.require=c)}(this,document,setTimeout);hui.parallax={_listeners:[],_init:function(){if(this._listening){return}this._listening=true;hui.listen(window,"scroll",this._scroll.bind(this));hui.listen(window,"resize",this._resize.bind(this))},_resize:function(){for(var b=this._listeners.length-1;b>=0;b--){var a=this._listeners[b];if(a.$resize){a.$resize(hui.window.getViewWidth(),hui.window.getViewHeight())}}this._scroll()},_scroll:function(){var e=hui.window.getScrollTop(),a=hui.window.getViewHeight();for(var c=this._listeners.length-1;c>=0;c--){var b=this._listeners[c];if(!b.$scroll){continue}if(b.debug&&!b.debugElement){b.debugElement=hui.build("div",{style:"position: absolute; border-top: 1px solid red; left: 0; right: 0;",parent:document.body})}if(b.element){var f=hui.position.getTop(b.element);f+=b.element.clientHeight/2;var j=f-e;var g=(j/a);if(b.debugElement){b.debugElement.style.top=f+"px";b.debugElement.innerHTML="<span>"+g+"</span>"}b.$scroll(g);continue}var h=(e-b.min)/(b.max-b.min);var d=hui.between(0,h,1);if(b._latest!==d){b.$scroll(d);b._latest=d}}},listen:function(a){this._listeners.push(a)},start:function(){this._init();this._resize()}};hui.ui={domReady:false,context:"",language:"en",objects:{},delegates:[],state:"default",latestObjectIndex:0,latestIndex:500,latestPanelIndex:1000,latestAlertIndex:1500,latestTopIndex:2000,toolTips:{},confirmOverlays:{},delayedUntilReady:[],texts:{request_error:{en:"An error occurred on the server",da:"Der skete en fejl på serveren"},"continue":{en:"Continue",da:"Fortsæt"},reload_page:{en:"Reload page",da:"Indæs siden igen"},access_denied:{en:"Access denied, maybe you are nolonger logged in",da:"Adgang nægtet, du er måske ikke længere logget ind"}}};hui.ui.get=function(a){if(a){if(a.element){return a}return hui.ui.objects[a]}return null};hui.ui.onReady=function(a){if(hui.ui.domReady){return a()}if(hui.browser.gecko&&hui.string.endsWith(document.baseURI,"xml")){window.setTimeout(a,1000);return}hui.ui.delayedUntilReady.push(a)};hui.ui._frameLoaded=function(a){hui.ui.callSuperDelegates(this,"frameLoaded",a)};hui.ui._resize=function(){hui.ui.reLayout();window.clearTimeout(this._delayedResize);if(!hui.ui._resizeFirst){this._delayedResize=window.setTimeout(hui.ui._afterResize,1000)}};hui.ui._afterResize=function(){hui.ui.callSuperDelegates(hui.ui,"$afterResize")};hui.ui.confirmOverlay=function(b){var e=b.element,a;if(!e){e=document.body}if(b.widget){e=b.widget.getElement()}if(hui.ui.confirmOverlays[e]){a=hui.ui.confirmOverlays[e];a.clear()}else{a=hui.ui.Overlay.create({modal:true});hui.ui.confirmOverlays[e]=a}if(b.text){a.addText(hui.ui.getTranslated(b.text))}var c=hui.ui.Button.create({text:hui.ui.getTranslated(b.okText)||"OK",highlighted:"true"});c.click(function(){if(b.onOk){b.onOk()}else{if(b.$ok){b.$ok()}}a.hide()});a.add(c);var d=hui.ui.Button.create({text:hui.ui.getTranslated(b.cancelText)||"Cancel"});d.onClick(function(){if(b.onCancel){b.onCancel()}else{if(b.$cancel){b.$cancel()}}a.hide()});a.add(d);a.show({element:e})};hui.ui.destroy=function(a){if(typeof(a.destroy)=="function"){a.destroy()}delete (hui.ui.objects[a.name])};hui.ui.destroyDescendants=function(d){var c=hui.ui.getDescendants(d);var b=hui.ui.objects;for(var a=0;a<c.length;a++){hui.ui.destroy(c[a])}};hui.ui.getAncestors=function(g){var l=[];var h=g.element;if(h){var b=hui.get.ancestors(h);var k=[];for(var f in hui.ui.objects){k.push(hui.ui.objects[f])}for(var d=0;d<b.length;d++){for(var c=0;c<k.length;c++){if(k[c].element==b[d]){l.push(k[c])}}}}return l};hui.ui.getDescendants=function(l){var k=[];if(l){var f=l.getElement?l.getElement():l;if(f){var h=f.getElementsByTagName("*");var g=[];for(var c in hui.ui.objects){g.push(hui.ui.objects[c])}for(var b=0;b<h.length;b++){for(var a=0;a<g.length;a++){if(h[b]==g[a].element){k.push(g[a])}}}}}return k};hui.ui.getAncestor=function(e,c){var b=hui.ui.getAncestors(e);for(var d=0;d<b.length;d++){if(hui.cls.has(b[d].getElement(),c)){return b[d]}}return null};hui.ui.changeState=function(c){if(hui.ui.state===c){return}var b=hui.ui.objects,a,d;for(a in b){d=b[a];if(d.options&&d.options.state){if(d.options.state==c){d.show()}else{d.hide()}}}hui.ui.state=c;this.reLayout()};hui.ui.reLayout=function(){var b=hui.ui.getDescendants(document.body);for(var a=0;a<b.length;a++){var c=b[a];if(c.$$layout){c.$$layout()}}};hui.ui.nextIndex=function(){hui.ui.latestIndex++;return hui.ui.latestIndex};hui.ui.nextPanelIndex=function(){hui.ui.latestPanelIndex++;return hui.ui.latestPanelIndex};hui.ui.nextAlertIndex=function(){hui.ui.latestAlertIndex++;return hui.ui.latestAlertIndex};hui.ui.nextTopIndex=function(){hui.ui.latestTopIndex++;return hui.ui.latestTopIndex};hui.ui.showCurtain=function(d){var e=d.widget;if(!e.curtain){e.curtain=hui.build("div",{"class":"hui_curtain",style:"z-index:none"});var a=hui.get.firstByClass(document.body,"hui_body");if(!a){a=document.body}a.appendChild(e.curtain);hui.listen(e.curtain,"click",function(){if(e.$curtainWasClicked){e.$curtainWasClicked()}})}var c=e.curtain;if(d.transparent){c.style.background="none"}else{if(d.color){if(d.color=="auto"){var b=hui.style.get(document.body,"background-color");if(b=="transparent"||b=="rgba(0, 0, 0, 0)"){b="#fff"}c.style.backgroundColor=b}else{c.style.backgroundColor=d.color}}}if(hui.browser.msie){c.style.height=hui.document.getHeight()+"px"}else{c.style.position="fixed";c.style.top="0";c.style.left="0";c.style.bottom="0";c.style.right="0"}c.style.zIndex=d.zIndex;if(d.transparent){c.style.display="block"}else{hui.style.setOpacity(c,0);c.style.display="block";hui.animate(c,"opacity",0.7,1000,{ease:hui.ease.slowFastSlow})}};hui.ui.hideCurtain=function(a){if(a.curtain){hui.animate(a.curtain,"opacity",0,200,{hideOnComplete:true})}};hui.ui.getText=function(a){var b=this.texts[a];if(!b){return a}if(b[this.language]){return b[this.language]}else{return b.en}};hui.ui.getTranslated=function(b){if(!hui.isDefined(b)||hui.isString(b)||typeof(b)=="number"){return b}if(b[hui.ui.language]){return b[hui.ui.language]}if(b[null]){return b[null]}for(var a in b){return b[a]}};hui.ui.confirm=function(a){if(!a.name){a.name="huiConfirm"}var d=hui.ui.get(a.name);var b;if(!d){d=hui.ui.Alert.create(a);var c=hui.ui.Button.create({name:name+"_cancel",text:a.cancel||"Cancel",highlighted:a.highlighted==="cancel"});c.listen({$click:function(){d.hide();if(a.onCancel){a.onCancel()}hui.ui.callDelegates(d,"cancel")}});d.addButton(c);b=hui.ui.Button.create({name:name+"_ok",text:a.ok||"OK",highlighted:a.highlighted==="ok"});d.addButton(b)}else{d.update(a);b=hui.ui.get(name+"_ok");b.setText(a.ok||"OK");b.setHighlighted(a.highlighted=="ok");b.clearListeners();hui.ui.get(name+"_cancel").setText(a.ok||"Cancel");hui.ui.get(name+"_cancel").setHighlighted(a.highlighted=="cancel");if(a.cancel){hui.ui.get(name+"_cancel").setText(a.cancel)}}b.listen({$click:function(){d.hide();if(a.onOK){a.onOK()}hui.ui.callDelegates(d,"ok")}});d.show()};hui.ui.alert=function(a){if(!this.alertBox){this.alertBox=hui.ui.Alert.create(a);this.alertBoxButton=hui.ui.Button.create({name:"huiAlertBoxButton",text:"OK"});this.alertBoxButton.listen({$click$huiAlertBoxButton:function(){hui.ui.alertBox.hide();if(hui.ui.alertBoxCallBack){hui.ui.alertBoxCallBack();hui.ui.alertBoxCallBack=null}}});this.alertBox.addButton(this.alertBoxButton)}else{this.alertBox.update(a)}this.alertBoxCallBack=a.onOK;this.alertBoxButton.setText(a.button?a.button:"OK");this.alertBox.show()};hui.ui.showMessage=function(b){if(typeof(b)=="string"){b={text:b}}if(b.delay){hui.ui.messageDelayTimer=window.setTimeout(function(){b.delay=null;hui.ui.showMessage(b)},b.delay);return}window.clearTimeout(hui.ui.messageDelayTimer);if(!hui.ui.message){hui.ui.message=hui.build("div",{"class":"hui_message",html:"<div><div></div></div>"});if(!hui.browser.msie){hui.style.setOpacity(hui.ui.message,0)}document.body.appendChild(hui.ui.message)}var c=hui.ui.getTranslated(b.text)||"";var a=hui.ui.message.getElementsByTagName("div")[1];if(b.icon){hui.dom.clear(a);a.appendChild(hui.ui.createIcon(b.icon,24));hui.dom.addText(a,c)}else{if(b.busy){a.innerHTML='<span class="hui_message_busy"></span>';hui.dom.addText(a,c)}else{hui.dom.setText(a,c)}}hui.ui.message.style.display="block";hui.ui.message.style.zIndex=hui.ui.nextTopIndex();hui.ui.message.style.marginLeft=(hui.ui.message.clientWidth/-2)+"px";hui.ui.message.style.marginTop=hui.window.getScrollTop()+"px";if(hui.browser.opacity){hui.animate(hui.ui.message,"opacity",1,300)}window.clearTimeout(hui.ui.messageTimer);if(b.duration){hui.ui.messageTimer=window.setTimeout(hui.ui.hideMessage,b.duration)}};hui.ui.msg=hui.ui.showMessage;hui.ui.msg.success=function(a){a=hui.override({icon:"common/success",duration:2000},a);hui.ui.msg(a)};hui.ui.msg.fail=function(a){a=hui.override({icon:"common/warning",duration:3000},a);hui.ui.msg(a)};hui.ui.hideMessage=function(){window.clearTimeout(hui.ui.messageDelayTimer);if(hui.ui.message){if(hui.browser.opacity){hui.animate(hui.ui.message,"opacity",0,300,{hideOnComplete:true})}else{hui.ui.message.style.display="none"}}};hui.ui.showToolTip=function(a){var c=a.key||"common";var b=hui.ui.toolTips[c];if(!b){b=hui.build("div",{"class":"hui_tooltip",style:"display:none;",html:"<div><div></div></div>",parent:document.body});hui.ui.toolTips[c]=b}b.onclick=function(){hui.ui.hideToolTip(a)};var e=hui.get(a.element);var d=hui.position.get(e);hui.dom.setText(b.getElementsByTagName("div")[1],a.text);if(b.style.display=="none"&&hui.browser.opacity){hui.style.setOpacity(b,0)}hui.style.set(b,{display:"block",zIndex:hui.ui.nextTopIndex()});hui.style.set(b,{left:(d.left-b.clientWidth+4)+"px",top:(d.top+2-(b.clientHeight/2)+(e.clientHeight/2))+"px"});if(hui.browser.opacity){hui.animate(b,"opacity",1,300)}};hui.ui.hideToolTip=function(a){var c=a?a.key||"common":"common";var b=hui.ui.toolTips[c];if(b){if(!hui.browser.msie){hui.animate(b,"opacity",0,300,{hideOnComplete:true})}else{b.style.display="none"}}};hui.ui.getElement=function(a){if(hui.dom.isElement(a)){return a}else{if(a.getElement){return a.getElement()}}return null};hui.ui.isWithin=function(d,a){d=hui.event(d);var g=hui.position.get(a),f={width:a.offsetWidth,height:a.offsetHeight},c=d.getLeft(),b=d.getTop();return c>g.left&&c<g.left+f.width&&b>g.top&&b<g.top+f.height};hui.ui.getIconUrl=function(b,a){return hui.ui.context+"/hui/icons/"+b+a+".png"};hui.ui.createIcon=function(c,b,a){return hui.build(a||"span",{"class":"hui_icon hui_icon_"+b,style:"background-image: url("+hui.ui.getIconUrl(c,b)+")"})};hui.ui.wrapInField=function(b){var a=hui.build("div",{"class":"hui_field",html:'<span class="hui_field_top"><span><span></span></span></span><span class="hui_field_middle"><span class="hui_field_middle"><span class="hui_field_content"></span></span></span><span class="hui_field_bottom"><span><span></span></span></span>'});hui.get.firstByClass(a,"hui_field_content").appendChild(b);return a};hui.ui.addFocusClass=function(a){var b=a.classElement||a.element,d=a["class"];hui.listen(a.element,"focus",function(){hui.cls.add(b,d);if(a.widget){hui.ui.setKeyboardTarget(a.widget)}});hui.listen(a.element,"blur",function(){hui.cls.remove(b,d);if(a.widget){hui.ui.setKeyboardTarget(null)}})};hui.ui.keyboardTarget=null;hui.ui.setKeyboardTarget=function(a){hui.ui.keyboardTarget=a};hui.ui.stress=function(a){var b=hui.ui.getElement(a);hui.effect.wiggle({element:b,duration:1000})};hui.ui.positionAtElement=function(c,g,b){b=b||{};c=hui.get(c);g=hui.get(g);var d=hui.style.get(c,"display");if(d=="none"){hui.style.set(c,{visibility:"hidden",display:"block"})}var f=hui.position.getLeft(g),e=hui.position.getTop(g);var a=b.vertical||null;if(b.horizontal&&b.horizontal=="right"){f=f+g.clientWidth-c.clientWidth}if(a=="topOutside"){e=e-c.clientHeight}else{if(a=="bottomOutside"){e=e+g.clientHeight}}f+=(b.left||0);e+=(b.top||0);hui.style.set(c,{left:f+"px",top:e+"px"});if(d=="none"){hui.style.set(c,{visibility:"visible",display:"none"})}};hui.ui.extend=function(b,a){if(a!==undefined){if(b.options){b.options=hui.override(b.options,a)}b.element=hui.get(a.element);b.name=a.name}if(!b.name){hui.ui.latestObjectIndex++;b.name="unnamed"+hui.ui.latestObjectIndex}if(hui.ui.objects[b.name]){hui.log("Widget replaced: "+b.name,hui.ui.objects[b.name])}hui.ui.objects[b.name]=b;b.delegates=[];b.listen=function(c){hui.array.add(this.delegates,c);return this};b.unListen=function(c){hui.array.remove(this.delegates,c)};b.clearListeners=function(){this.delegates=[]};b.fire=function(e,d,c){return hui.ui.callDelegates(this,e,d,c)};b.fireValueChange=function(){b.fire("valueChanged",b.value);hui.ui.firePropertyChange(b,"value",b.value);hui.ui.callAncestors(b,"childValueChanged",b.value)};b.fireProperty=function(c,d){hui.ui.firePropertyChange(this,c,d)};b.fireSizeChange=function(){hui.ui.callAncestors(b,"$$childSizeChanged")};if(!b.getElement){b.getElement=function(){return this.element}}if(!b.destroy){b.destroy=function(){if(this.element){hui.dom.remove(this.element)}}}if(!b.valueForProperty){b.valueForProperty=function(c){return this[c]}}if(b.nodes&&b.element){b.nodes=hui.collect(b.nodes,b.element)}};hui.ui.callAncestors=function(e,g,c,b){if(typeof(c)=="undefined"){c=e}var f=hui.ui.getAncestors(e);for(var a=0;a<f.length;a++){if(f[a][g]){f[a][g](c,b)}}};hui.ui.callDescendants=function(e,g,c,b){if(typeof(c)=="undefined"){c=e}if(g[0]!=="$"){g="$"+g}var f=hui.ui.getDescendants(e);for(var a=0;a<f.length;a++){if(f[a][g]){f[a][g](c,b)}}};hui.ui.callVisible=function(a){hui.ui.callDescendants(a,"$visibilityChanged")};hui.ui.listen=function(a){if(hui.ui.domReady&&a.$ready){a.$ready()}hui.ui.delegates.push(a)};hui.ui.unListen=function(a){hui.array.remove(hui.ui.delegates,a)};hui.ui.callDelegates=function(e,a,j,b){if(typeof(j)=="undefined"){j=e}var k;if(e.delegates){for(var f=0;f<e.delegates.length;f++){var g=e.delegates[f],c,h="$"+a+"$"+e.name;if(e.name&&g[h]){c=g[h](j,b)}else{if(g["$"+a]){c=g["$"+a](j,b)}}if(k===undefined&&c!==undefined&&typeof(c)!="undefined"){k=c}}}var d=hui.ui.callSuperDelegates(e,a,j,b);if(k===undefined&&d!==undefined){k=d}return k};hui.ui.tellContainers=function(a,b){if(window.parent!=window){try{window.parent.hui.ui._tellContainers(a,b)}catch(c){}}};hui.ui._tellContainers=function(a,b){hui.ui.callSuperDelegates({},a,b);if(window.parent!=window){try{window.parent.hui.ui._tellContainers(a,b)}catch(c){}}};hui.ui.callSuperDelegates=function(f,h,e,d){if(typeof(e)=="undefined"){e=f}var a;for(var b=0;b<hui.ui.delegates.length;b++){var c=hui.ui.delegates[b],g;if(f.name&&c["$"+h+"$"+f.name]){g=c["$"+h+"$"+f.name](e,d)}else{if(c["$"+h]){g=c["$"+h](e,d)}}if(a===undefined&&g!==undefined&&typeof(g)!="undefined"){a=g}}return a};hui.ui.resolveImageUrl=function(g,b,f,a){for(var d=0;d<g.delegates.length;d++){if(g.delegates[d].$resolveImageUrl){return g.delegates[d].$resolveImageUrl(b,f,a)}}for(var c=0;c<hui.ui.delegates.length;c++){var e=hui.ui.delegates[c];if(e.$resolveImageUrl){return e.$resolveImageUrl(b,f,a)}}return null};hui.ui.include=function(a){hui.ui.request({url:a.url,$text:function(c){var b=hui.build("div",{html:c,parent:document.body});hui.dom.runScripts(b);a.$success()}})};hui.ui.firePropertyChange=function(c,a,b){hui.ui.callDelegates(c,"propertyChanged",{property:a,value:b})};hui.ui.bind=function(e,a){if(hui.isString(e)&&e.charAt(0)=="@"){var d=e.substring(1).split(".");var c=hui.ui.get(d[0]);if(!c){hui.log("Unable to bind to "+e);return}var b=d.slice(1).join(".");c.listen({$propertyChanged:function(f){if(f.property==b){a(f.value)}}});return c.valueForProperty(b)}return e};hui.ui.handleRequestError=function(b){hui.log("General request error received");var a=hui.ui.callSuperDelegates(b||this,"requestError");if(!a){hui.ui.confirmOverlay({element:document.body,text:hui.ui.getText("request_error"),okText:hui.ui.getText("reload_page"),cancelText:hui.ui.getText("continue"),onOk:function(){document.location.reload()}})}};hui.ui.handleForbidden=function(b){hui.log("General access denied received");var a=hui.ui.callSuperDelegates(b||this,"accessDenied");if(!a){hui.ui.confirmOverlay({element:document.body,text:hui.ui.getText("access_denied"),okText:hui.ui.getText("reload_page"),cancelText:hui.ui.getText("continue"),onOk:function(){document.location.reload()}})}};hui.ui.request=function(i){i=hui.override({method:"post",parameters:{}},i);if(i.json){for(var e in i.json){i.parameters[e]=hui.string.toJSON(i.json[e])}}var f=i.$success,b=i.$object,g=i.$text,c=i.$xml,a=i.$failure,d=i.$forbidden,h=i.message;i.$success=function(k){if(h){if(h.success){hui.ui.showMessage({text:h.success,icon:"common/success",duration:h.duration||2000})}else{if(h.start){hui.ui.hideMessage()}}}var l,j;if(typeof(f)=="string"){if(!hui.request.isXMLResponse(k)){l=k.responseText.replace(/^\s+|\s+$/g,"");if(l.length>0){j=hui.string.fromJSON(k.responseText)}else{j=""}hui.ui.callDelegates(j,"success$"+f)}else{hui.ui.callDelegates(k,"success$"+f)}}else{if(c&&hui.request.isXMLResponse(k)){c(k.responseXML)}else{if(b){l=k.responseText.replace(/^\s+|\s+$/g,"");if(l.length>0){j=hui.string.fromJSON(k.responseText)}else{j=null}b(j)}else{if(typeof(f)=="function"){f(k)}else{if(g){g(k.responseText)}}}}}};i.$failure=function(j){if(typeof(a)=="string"){hui.ui.callDelegates(j,"failure$"+a)}else{if(typeof(a)=="function"){a(j)}else{if(i.message&&i.message.start){hui.ui.hideMessage()}hui.ui.handleRequestError()}}};i.$exception=i.$exception||function(k,j){hui.log(k);hui.log(j);throw k};i.$forbidden=function(j){if(i.message&&i.message.start){hui.ui.hideMessage()}if(d){d(j)}else{i.$failure(j);hui.ui.handleForbidden()}};if(i.message&&i.message.start){hui.ui.msg({text:i.message.start,busy:true,delay:i.message.delay})}hui.request(i)};hui.ui.parseItems=function(c){var a=c.documentElement;var b=[];hui.ui.parseSubItems(a,b);return b};hui.ui.parseSubItems=function(d,f){var b=d.childNodes;for(var a=0;a<b.length;a++){var e=b[a];if(e.nodeType==1&&e.nodeName=="title"){f.push({title:e.getAttribute("title"),type:"title"})}else{if(e.nodeType==1&&e.nodeName=="item"){var c=[];hui.ui.parseSubItems(e,c);f.push({text:e.getAttribute("text"),title:e.getAttribute("title"),value:e.getAttribute("value"),icon:e.getAttribute("icon"),kind:e.getAttribute("kind"),badge:e.getAttribute("badge"),children:c})}}}};hui.ui.require=function(c,b){for(var a=c.length-1;a>=0;a--){c[a]=hui.ui.context+"hui/js/"+c[a]+".js"}hui.require(c,b)};if(window.define){define("hui.ui",hui.ui)}hui.onReady(function(){hui.listen(window,"resize",hui.ui._resize);hui.ui.reLayout();hui.ui.domReady=true;if(window.parent&&window.parent.hui&&window.parent.hui.ui){window.parent.hui.ui._frameLoaded(window)}for(var a=0;a<hui.ui.delayedUntilReady.length;a++){hui.ui.delayedUntilReady[a]()}hui.ui.callSuperDelegates(this,"ready")});hui.ui.ImageViewer=function(a){this.options=hui.override({maxWidth:800,maxHeight:600,perimeter:100,sizeSnap:100,margin:0,ease:hui.ease.slowFastSlow,easeEnd:hui.ease.bounce,easeAuto:hui.ease.slowFastSlow,easeReturn:hui.ease.cubicInOut,transition:400,transitionEnd:1000,transitionReturn:300,images:[]},a);this.element=hui.get(a.element);this.box=this.options.box;this.dirty=false;this.width=600;this.height=460;this.index=0;this.position=0;this.playing=false;this.name=a.name;this.images=a.images||[];hui.ui.extend(this);this.box.listen(this);this._attach();this._attachDrag();if(a.listener){this.listen(a.listener)}};hui.ui.ImageViewer.create=function(a){a=a||{};var b=a.element=hui.build("div",{"class":"hui_imageviewer",html:'<div class="hui_imageviewer_viewer"><div class="hui_imageviewer_inner_viewer"></div></div><div class="hui_imageviewer_text"></div><div class="hui_imageviewer_status"></div><div class="hui_imageviewer_controller"><div><div><a class="hui_imageviewer_previous"></a><a class="hui_imageviewer_play"></a><a class="hui_imageviewer_next"></a><a class="hui_imageviewer_close"></a></div></div></div>'});var c=a.box=hui.ui.Box.create({variant:"plain",absolute:true,modal:true,closable:true});c.add(b);c.addToDocument();return new hui.ui.ImageViewer(a)};hui.ui.ImageViewer.prototype={nodes:{viewer:"hui_imageviewer_viewer",innerViewer:"hui_imageviewer_inner_viewer",status:"hui_imageviewer_status",text:"hui_imageviewer_text",previous:"hui_imageviewer_previous",controller:"hui_imageviewer_controller",next:"hui_imageviewer_next",play:"hui_imageviewer_play",close:"hui_imageviewer_close"},_attach:function(){var a=this;this.nodes.next.onclick=function(){a.next(true)};this.nodes.previous.onclick=function(){a.previous(true)};this.nodes.play.onclick=function(){a.playOrPause()};this.nodes.close.onclick=this.hide.bind(this);this._timer=function(){a.next(false)};this._keyListener=function(b){b=hui.event(b);if(b.escapeKey){a.hide()}else{if(!a.zoomed){if(b.rightKey){a.next(true)}else{if(b.leftKey){a.previous(true)}else{if(b.returnKey){a.playOrPause()}}}}}},hui.listen(this.nodes.viewer,"mousemove",this._onMouseMove.bind(this));hui.listen(this.nodes.controller,"mouseover",function(){a.overController=true});hui.listen(this.nodes.controller,"mouseout",function(){a.overController=false});hui.listen(this.nodes.viewer,"mouseout",function(b){if(!hui.ui.isWithin(b,this.nodes.viewer)){a._hideController()}}.bind(this))},_draw:function(a){if(hui.browser.webkit){this.nodes.innerViewer.style.webkitTransform="translate3d("+this.position+"px,0,0)"}else{this.nodes.innerViewer.style.marginLeft=this.position+"px"}},_attachDrag:function(){var c=0;var e=0;var d=0;var f=this.nodes.viewer;var b=this.nodes.innerViewer;var a=0;hui.drag.register({touch:true,element:this.nodes.innerViewer,onBeforeMove:function(g){c=g.getLeft();d=this.position;a=(this.images.length-1)*this.width*-1}.bind(this),onMove:function(g){e=g.getLeft();var h=(d-(c-e));if(h>0){h=(Math.exp(h*-0.013)-1)*-80}if(h<a){h=(Math.exp((h-a)*0.013)-1)*80+a}this.position=h;this._draw()}.bind(this),onAfterMove:function(){var h=(c-e)<0?Math.floor:Math.ceil;this.index=h(this.position*-1/this.width);var g=this.images.length-1;if(this.index==this.images.length){this.index=0}else{if(this.index<0){this.index=this.images.length-1}else{g=1}}this._goToImage(true,g,false,true)}.bind(this),onNotMoved:this._zoom.bind(this)})},_onMouseMove:function(){window.clearTimeout(this.ctrlHider);if(this._shouldShowController()){this.ctrlHider=window.setTimeout(this._hideController.bind(this),2000);if(!hui.browser.opacity){this.nodes.controller.style.display="block"}else{hui.effect.fadeIn({element:this.nodes.controller,duration:200})}}},_hideController:function(){if(!this.overController){if(!hui.browser.opacity){this.nodes.controller.style.display="none"}else{hui.effect.fadeOut({element:this.nodes.controller,duration:500})}}},_getLargestSize:function(a,b){return hui.fit(b,a,{upscale:false})},_calculateSize:function(){var a=this.options.sizeSnap;var f=hui.window.getViewWidth()-this.options.perimeter;f=Math.floor(f/a)*a;f=Math.min(f,this.options.maxWidth);var b=hui.window.getViewHeight()-this.options.perimeter;b=Math.floor(b/a)*a;b=Math.min(b,this.options.maxHeight);var e=0;var d=0;for(var c=0;c<this.images.length;c++){var g=this._getLargestSize({width:f,height:b},this.images[c]);e=Math.max(e,g.width);d=Math.max(d,g.height)}b=Math.floor(Math.min(b,d));f=Math.floor(Math.min(f,e));if(f!=this.width||b!=this.height){this.width=f;this.height=b;this.dirty=true}},_updateUI:function(){if(this.dirty){this.nodes.innerViewer.innerHTML="";for(var b=0;b<this.images.length;b++){var a=hui.build("div",{"class":"hui_imageviewer_image"});hui.style.set(a,{width:(this.width+this.options.margin)+"px",height:(this.height-1)+"px"});this.nodes.innerViewer.appendChild(a)}this.nodes.controller.style.display=this._shouldShowController()?"block":"none";this.dirty=false;this._preload()}},_shouldShowController:function(){return this.images.length>1},_goToImage:function(a,g,e,f){var i=this.position;var h=this.position=this.index*(this.width+this.options.margin)*-1;if(a){var d,c;if(f){d=200*g;c=hui.ease.fastSlow;c=hui.ease.quadOut}else{if(g>1){d=Math.min(g*this.options.transitionReturn,2000);c=this.options.easeReturn}else{var b=this.index==0||this.index==this.images.length-1;c=(b?this.options.easeEnd:this.options.ease);if(!e){c=this.options.easeAuto}d=(b?this.options.transitionEnd:this.options.transition)}}hui.animate({node:this.nodes.innerViewer,css:{marginLeft:h+"px"},duration:d,ease:c,$render:function(k,j){this.position=i+(h-i)*j;this._draw()}.bind(this)})}else{this._draw()}this._drawText()},_drawText:function(){var a=this.images[this.index].text;if(a){this.nodes.text.innerHTML=a;this.nodes.text.style.display="block"}else{this.nodes.text.innerHTML="";this.nodes.text.style.display="none"}},showById:function(b){for(var a=0;a<this.images.length;a++){if(this.images[a].id==b){this.show(a);break}}},show:function(a){this.index=a||0;this._calculateSize();this._updateUI();var b=this.options.margin;hui.style.set(this.element,{width:(this.width+b)+"px",height:(this.height+b*2-1)+"px"});hui.style.set(this.nodes.viewer,{width:(this.width+b)+"px",height:(this.height-1)+"px"});hui.style.set(this.nodes.innerViewer,{width:((this.width+b)*this.images.length)+"px",height:(this.height-1)+"px"});hui.style.set(this.nodes.controller,{marginLeft:((this.width-160)/2+b*0.5)+"px",display:"none"});this.box.show();this._goToImage(false,0,false);hui.listen(document,"keydown",this._keyListener);this.visible=true;this._setHash(true)},_setHash:function(a){return;if(!this._listening){this._listening=true;if(!hui.browser.msie6&&!hui.browser.msie7){hui.listen(window,"hashchange",this._onHashChange.bind(this))}}if(a){document.location="#imageviewer"}else{hui.location.clearHash()}},_onHashChange:function(){if(this._changing){return}this._changing=true;if(hui.location.hasHash("imageviewer")&&!this.visible){this.show()}else{if(!hui.location.hasHash("imageviewer")&&this.visible){this.hide()}}this._changing=false},hide:function(){this._hide()},_hide:function(){this.pause();this.box.hide();this._endZoom();hui.unListen(document,"keydown",this._keyListener);this.visible=false;this._setHash(false)},$boxCurtainWasClicked:function(){this.hide()},$boxWasClosed:function(){this.hide()},clearImages:function(){this.images=[];this.dirty=true},addImages:function(a){for(var b=0;b<a.length;b++){this.addImage(a[b])}},addImage:function(a){this.images.push(a);this.dirty=true},play:function(){if(!this.interval){this.interval=window.setInterval(this._timer,6000)}this.next(false);this.playing=true;this.nodes.play.className="hui_imageviewer_pause"},pause:function(){window.clearInterval(this.interval);this.interval=null;this.nodes.play.className="hui_imageviewer_play";this.playing=false},playOrPause:function(){if(this.playing){this.pause()}else{this.play()}},_resetPlay:function(){if(this.playing){window.clearInterval(this.interval);this.interval=window.setInterval(this._timer,6000)}},previous:function(a){var b=1;this.index--;if(this.index<0){this.index=this.images.length-1;b=this.images.length-1}this._goToImage(true,b,a);this._resetPlay()},next:function(a){var b=1;this.index++;if(this.index==this.images.length){this.index=0;b=this.images.length-1}this._goToImage(true,b,a);this._resetPlay()},_preload:function(){var b=new hui.Preloader();b.addImages(hui.ui.context+"/hui/gfx/imageviewer_controls.png");var a=this;b.setDelegate({allImagesDidLoad:function(){a._preloadImages()}});b.load()},_preloadImages:function(){var a=new hui.Preloader();a.setDelegate(this);for(var c=0;c<this.images.length;c++){var b=hui.ui.resolveImageUrl(this,this.images[c],this.width,this.height);if(b!==null){a.addImages(b)}}this.nodes.status.innerHTML="0%";this.nodes.status.style.display="";a.load(this.index)},allImagesDidLoad:function(){this.nodes.status.style.display="none"},imageDidLoad:function(c,d,b){this.nodes.status.innerHTML=Math.round(c/d*100)+"%";var a=hui.ui.resolveImageUrl(this,this.images[b],this.width,this.height);a=a.replace(/&amp;/g,"&");this.nodes.innerViewer.childNodes[b].style.backgroundImage="url('"+a+"')";hui.cls.set(this.nodes.innerViewer.childNodes[b],"hui_imageviewer_image_abort",false);hui.cls.set(this.nodes.innerViewer.childNodes[b],"hui_imageviewer_image_error",false)},imageDidGiveError:function(b,c,a){hui.cls.set(this.nodes.innerViewer.childNodes[a],"hui_imageviewer_image_error",true)},imageDidAbort:function(b,c,a){hui.cls.set(this.nodes.innerViewer.childNodes[a],"hui_imageviewer_image_abort",true)},zoomed:false,_zoom:function(f){var a=this.images[this.index];if(a.width<=this.width&&a.height<=this.height){return}if(!this.zoomer){this.zoomer=hui.build("div",{"class":"hui_imageviewer_zoomer",style:"width:"+this.nodes.viewer.clientWidth+"px;height:"+this.nodes.viewer.clientHeight+"px"});this.element.insertBefore(this.zoomer,hui.dom.firstChild(this.element));hui.listen(this.zoomer,"mousemove",this._onZoomMove.bind(this));hui.listen(this.zoomer,"click",this._endZoom.bind(this))}this._hideController();this.pause();var c=this._getLargestSize({width:2000,height:2000},a);var b=hui.ui.resolveImageUrl(this,a,c.width,c.height);var d=Math.max(0,Math.round((this.nodes.viewer.clientHeight-c.height)/2));this.zoomer.innerHTML='<div style="width:'+c.width+"px;height:"+c.height+'px; margin: 0 auto;"><img src="'+b+'" style="margin-top: '+d+'px" /></div>';this.zoomer.style.display="block";this.zoomInfo={width:c.width,height:c.height};this._onZoomMove(f);this.zoomed=true},_onZoomMove:function(b){if(!this.zoomInfo){return}var c=hui.position.get(this.zoomer);b=new hui.Event(b);var a=(b.getLeft()-c.left)/this.zoomer.clientWidth*(this.zoomInfo.width-this.zoomer.clientWidth);var d=(b.getTop()-c.top)/this.zoomer.clientHeight*(this.zoomInfo.height-this.zoomer.clientHeight);this.zoomer.scrollLeft=a;this.zoomer.scrollTop=d},_endZoom:function(){if(this.zoomer){this.zoomer.style.display="none";this.zoomed=false}}};if(window.define){define("hui.ui.ImageViewer",hui.ui.ImageViewer)}hui.ui.Box=function(a){this.options=hui.override({},a);this.name=a.name;this.element=hui.get(a.element);this.visible=!this.options.absolute;hui.ui.extend(this);if(this.nodes.close){hui.listen(this.nodes.close,"click",this._close.bind(this))}};hui.ui.Box.create=function(a){a=a||{};var c=a.variant||"standard";var d=c!=="plain";var b=(a.closable?'<a class="hui_box_close hui_box_close_'+c+'" href="#"></a>':"");if(d){b+='<div class="hui_box_top"><div><div></div></div></div><div class="hui_box_middle"><div class="hui_box_middle">'}if(a.title){b+='<div class="hui_box_header"><strong class="hui_box_title">'+hui.string.escape(hui.ui.getTranslated(a.title))+"</strong></div>"}b+='<div class="hui_box_body" style="'+(a.padding?"padding: "+a.padding+"px;":"")+(a.width?"width: "+a.width+"px;":"")+'"></div>';if(d){b+='</div></div><div class="hui_box_bottom"><div><div></div></div></div>'}a.element=hui.build("div",{"class":"hui_box hui_box_"+c,html:b,style:a.width?a.width+"px":null});if(a.absolute){hui.cls.add(a.element,"hui_box_absolute")}if(c){hui.cls.add(a.element,"hui_box_"+c)}return new hui.ui.Box(a)};hui.ui.Box.prototype={nodes:{body:"hui_box_body",close:"hui_box_close"},_close:function(a){hui.stop(a);this.hide();this.fire("boxWasClosed");this.fire("close")},shake:function(){hui.effect.shake({element:this.element})},addToDocument:function(){document.body.appendChild(this.element)},add:function(b){var a=this.nodes.body;if(b.getElement){a.appendChild(b.getElement())}else{a.appendChild(b)}},show:function(){var d=this.element;if(this.options.modal){var b=hui.ui.nextPanelIndex();d.style.zIndex=b+1;hui.ui.showCurtain({widget:this,zIndex:b})}if(this.options.absolute){hui.style.set(d,{display:"block",visibility:"hidden"});var a=d.clientWidth;var c=(hui.window.getViewHeight()-d.clientHeight)/2+hui.window.getScrollTop();hui.style.set(d,{marginLeft:(a/-2)+"px",top:c+"px",display:"block",visibility:"visible"})}else{d.style.display="block"}this.visible=true;hui.ui.callVisible(this)},isVisible:function(){return this.visible},$$layout:function(){if(this.options.absolute&&this.visible){var c=this.element;var a=c.clientWidth;var b=(hui.window.getViewHeight()-c.clientHeight)/2+hui.window.getScrollTop();hui.style.set(c,{marginLeft:(a/-2)+"px",top:b+"px"})}},hide:function(){hui.ui.hideCurtain(this);this.element.style.display="none";this.visible=false;hui.ui.callVisible(this)},$curtainWasClicked:function(){this.fire("boxCurtainWasClicked");if(this.options.curtainCloses){this._close()}}};hui.ui.SearchField=function(a){this.options=hui.override({expandedWidth:null},a);this.element=hui.get(a.element);this.name=a.name;this.field=hui.get.firstByTag(this.element,"input");this.value=this.field.value;this.adaptive=hui.cls.has(this.element,"hui_searchfield_adaptive");this.initialWidth=null;hui.ui.extend(this);this._addBehavior();if(this.value!==""){this._updateClass()}};hui.ui.SearchField.create=function(a){a=a||{};a.element=hui.build("span",{"class":a.adaptive?"hui_searchfield hui_searchfield_adaptive":"hui_searchfield",html:'<em class="hui_searchfield_placeholder"></em><a href="javascript:void(0);" class="hui_searchfield_reset"></a><span><span><input type="text"/></span></span>'});return new hui.ui.SearchField(a)};hui.ui.SearchField.prototype={_addBehavior:function(){var b=this;hui.listen(this.field,"keyup",this._onKeyUp.bind(this));var c=hui.get.firstByTag(this.element,"a");c.tabIndex=-1;if(!hui.browser.ipad){var a=function(){b.field.focus();b.field.select()};hui.listen(this.element,"mousedown",a);hui.listen(this.element,"mouseup",a);hui.listen(hui.get.firstByTag(this.element,"em"),"mousedown",a)}else{var a=function(){b.field.focus()};hui.listen(hui.get.firstByTag(this.element,"em"),"click",a)}hui.listen(c,"mousedown",function(d){hui.stop(d);b.reset();a()});hui.listen(this.field,"focus",this._onFocus.bind(this));hui.listen(this.field,"blur",this._onBlur.bind(this))},_onFocus:function(){hui.ui.setKeyboardTarget(this);this.focused=true;this._updateClass();if(this.options.expandedWidth>0){if(this.initialWidth==null){this.initialWidth=parseInt(hui.style.get(this.element,"width"))}hui.animate(this.element,"width",this.options.expandedWidth+"px",500,{ease:hui.ease.slowFastSlow})}},_onBlur:function(){hui.ui.setKeyboardTarget(null);this.focused=false;this._updateClass();if(this.initialWidth!==null){hui.animate(this.element,"width",this.initialWidth+"px",500,{ease:hui.ease.slowFastSlow,delay:100})}},_onKeyUp:function(a){this._fieldChanged();if(a.keyCode===hui.KEY_RETURN){this.fire("submit")}},focus:function(){this.field.focus()},setValue:function(a){this.field.value=a===undefined||a===null?"":a;this._fieldChanged()},getValue:function(){return this.field.value},isEmpty:function(){return this.field.value==""},isBlank:function(){return hui.isBlank(this.field.value)},reset:function(){this.field.value="";this._fieldChanged()},_updateClass:function(){var a="hui_searchfield";if(this.adaptive){a+=" hui_searchfield_adaptive"}if(this.focused&&this.value!=""){a+=" hui_searchfield_focus_dirty"}else{if(this.focused){a+=" hui_searchfield_focus"}else{if(this.value!=""){a+=" hui_searchfield_dirty"}}}this.element.className=a},_fieldChanged:function(){if(this.field.value!=this.value){this.value=this.field.value;this._updateClass();this.fireValueChange()}}};if(window.define){define("hui.ui.SearchField",hui.ui.SearchField)}hui.ui.Overlay=function(a){this.options=a;this.element=hui.get(a.element);this.content=hui.get.byClass(this.element,"hui_inner_overlay")[1];this.name=a.name;this.icons={};this.visible=false;hui.ui.extend(this);this._addBehavior()};hui.ui.Overlay.create=function(a){a=a||{};var b=a.element=hui.build("div",{className:"hui_overlay"+(a.variant?" hui_overlay_"+a.variant:""),style:"display:none",html:'<div class="hui_inner_overlay"><div class="hui_inner_overlay"></div></div>'});document.body.appendChild(b);return new hui.ui.Overlay(a)};hui.ui.Overlay.prototype={_addBehavior:function(){var a=this},addIcon:function(c,d){var a=this;var b=hui.build("div",{className:"hui_overlay_icon"});b.style.backgroundImage="url("+hui.ui.getIconUrl(d,32)+")";hui.listen(b,"click",function(f){a._iconWasClicked(c,f)});this.icons[c]=b;this.content.appendChild(b)},addText:function(a){this.content.appendChild(hui.build("span",{"class":"hui_overlay_text",text:a}))},add:function(a){this.content.appendChild(a.getElement())},hideIcons:function(b){for(var a=0;a<b.length;a++){this.icons[b[a]].style.display="none"}},showIcons:function(b){for(var a=0;a<b.length;a++){this.icons[b[a]].style.display=""}},_iconWasClicked:function(a,b){hui.ui.callDelegates(this,"iconWasClicked",a,b)},showAtElement:function(b,a){a=a||{};hui.ui.positionAtElement(this.element,b,a);if(a.autoHide){this._autoHide(b)}if(this.visible){return}if(hui.browser.msie){this.element.style.display="block"}else{hui.style.set(this.element,{display:"block",opacity:0});hui.animate(this.element,"opacity",1,150)}var c=a.zIndex===undefined?a.zIndex:hui.ui.nextAlertIndex();if(this.options.modal){this.element.style.zIndex=hui.ui.nextAlertIndex();hui.ui.showCurtain({widget:this,zIndex:c})}else{this.element.style.zIndex=c}this.visible=true},_autoHide:function(a){hui.cls.add(a,"hui_overlay_bound");hui.unListen(document.body,"mousemove",this._hider);this._hider=function(b){if(!hui.ui.isWithin(b,a)&&!hui.ui.isWithin(b,this.element)){try{hui.unListen(document.body,"mousemove",this._hider);hui.cls.remove(a,"hui_overlay_bound");this.hide()}catch(b){hui.log("unable to stop listening: document="+document)}}}.bind(this);hui.listen(document.body,"mousemove",this._hider)},show:function(a){a=a||{};if(!this.visible){hui.style.set(this.element,{display:"block",visibility:"hidden"})}if(a.element){hui.position.place({source:{element:this.element,vertical:0,horizontal:0.5},target:{element:a.element,vertical:0.5,horizontal:0.5},insideViewPort:true,viewPartMargin:9})}if(a.autoHide&&a.element){this._autoHide(a.element)}if(this.visible){return}hui.effect.bounceIn({element:this.element});this.visible=true;if(this.options.modal){var b=hui.ui.nextAlertIndex();this.element.style.zIndex=b+1;hui.ui.showCurtain({widget:this,zIndex:b,color:"auto"})}},$curtainWasClicked:function(){this.hide()},hide:function(){hui.ui.hideCurtain(this);this.element.style.display="none";this.visible=false},clear:function(){hui.ui.destroyDescendants(this.content);this.content.innerHTML=""}};hui.ui.Button=function(a){this.options=a;this.name=a.name;this.element=hui.get(a.element);this.enabled=!hui.cls.has(this.element,"hui_button_disabled");hui.ui.extend(this);this._attach();if(a.listener){this.listen(a.listener)}};hui.ui.Button.create=function(b){b=hui.override({text:"",highlighted:false,enabled:true},b);var e="hui_button"+(b.highlighted?" hui_button_highlighted":"");if(b.variant){e+=" hui_button_"+b.variant}if(b.small&&b.variant){e+=" hui_button_small_"+b.variant}if(b.small){e+=" hui_button_small"+(b.highlighted?" hui_button_small_highlighted":"")}if(!b.enabled){e+=" hui_button_disabled"}var f=b.text?hui.ui.getTranslated(b.text):null;if(b.title){f=hui.ui.getTranslated(b.title)}var c=b.element=hui.build("a",{"class":e,href:"javascript://"});var a=hui.build("span",{parent:hui.build("span",{parent:c})});if(b.icon){var d=hui.build("em",{parent:a,"class":"hui_button_icon",style:"background-image:url("+hui.ui.getIconUrl(b.icon,16)+")"});if(!f){hui.cls.add(d,"hui_button_icon_notext")}}if(f){hui.dom.addText(a,f)}return new hui.ui.Button(b)};hui.ui.Button.prototype={_attach:function(){var a=this;hui.listen(this.element,"mousedown",function(b){hui.stop(b)});hui.listen(this.element,"click",function(b){hui.stop(b);a._onClick(b)})},_onClick:function(b){if(this.enabled){var a=false;if(b){a=hui.event(b).altKey}if(this.options.confirm&&!a){hui.ui.confirmOverlay({widget:this,text:this.options.confirm.text,okText:this.options.confirm.okText,cancelText:this.options.confirm.cancelText,onOk:this._fireClick.bind(this)})}else{this._fireClick()}}else{this.element.blur()}},_fireClick:function(){this.fire("click",this);if(this.options.submit){var a=hui.ui.getAncestor(this,"hui_formula");if(a){a.submit()}else{hui.log("No form found to submit")}}},click:function(a){if(a){this.listen({$click:a});return this}else{this._onClick()}},focus:function(){this.element.focus()},onClick:function(a){this.listen({$click:a})},setEnabled:function(a){this.enabled=a;this._updateUI()},enable:function(){this.setEnabled(true)},disable:function(){this.setEnabled(false)},setHighlighted:function(a){hui.cls.set(this.element,"hui_button_highlighted",a)},_updateUI:function(){hui.cls.set(this.element,"hui_button_disabled",!this.enabled)},setText:function(a){hui.dom.setText(this.element.getElementsByTagName("span")[1],hui.ui.getTranslated(a))},getData:function(){return this.options.data}};hui.ui.Buttons=function(a){this.name=a.name;this.element=hui.get(a.element);this.body=hui.get.firstByClass(this.element,"hui_buttons_body");hui.ui.extend(this)};hui.ui.Buttons.create=function(a){a=hui.override({top:0},a);var b=a.element=hui.build("div",{"class":"hui_buttons"});if(a.align==="right"){hui.cls.add(b,"hui_buttons_right")}if(a.align==="center"){hui.cls.add(b,"hui_buttons_center")}if(a.top>0){b.style.paddingTop=a.top+"px"}hui.build("div",{"class":"hui_buttons_body",parent:b});return new hui.ui.Buttons(a)};hui.ui.Buttons.prototype={add:function(a){this.body.appendChild(a.element);return this}};