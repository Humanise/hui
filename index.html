<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>Humanise User Interface</title>
  <link rel="stylesheet" href="bin/minimized.css" type="text/css" media="screen">
  <style type="text/css" media="screen">

  body {
    font-family: 'Open Sans', Arial, sans-serif;
    margin: 20px 10px;
    text-align: center;
  }

  h1 {
    font-weight: 100;
    font-size: 48px;
    font-size: 6vw;
    line-height: 1;
    color: rgba(255,255,255,0);
    letter-spacing: -10px;
  }

  h1 span {
    display: inline-block;
  }

  h1 span:first-letter {
    font-weight: 600;
    color: #000;
    z-index: 1;
    position: relative;
  }

  .logo {
    color: #999;
    font-size: 20px;
  }
  .logo strong {
    color: #000;
    text-transform: uppercase;
  }

  .result {
    display: block;
    line-height: 1;
    padding: 5px;
    color: inherit;
  }
  </style>
  <script>hui={_:[],on:function(){this._.push(arguments)}};</script>
</head>
<body>
  <h1><span>Humanise</span> <span>User</span> <span>Interface</span></h1>
  <p>The common language of humans and machines</p>
  <div class="js-search"></div>
  <div class="js-results"></div>
  <p>
    <a href="demo/index.html" class="hui_button">Demonstration</a>
    <a href="test/index.xml" class="hui_button">Test site</a>
    <a href="api/index.html" class="hui_button">JavaScript API</a>
    <a href="api/xml/index.html" class="hui_button">XML api</a>
  </p>
  <script>
  hui.on(function() {
    hui.build('link',{
      href : 'https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800',
      rel : 'stylesheet',
      type : 'text/css',
      parent : document.head
    });
    hui.on(['hui.animation','hui.Color'],function() {
      hui.animate({
        node : hui.find('h1'),
        css : { 'letter-spacing' : '0px', color: '#ddd' },
        ease : hui.ease.elastic,
        duration : 2000,
        $complete : function() {
          hui.animate({
            node : hui.find('h1'),
            css : { color: '#000' },
            duration : 300});
        }
      });
    })
    hui.on(['hui.ui.SearchField'],function() {
      var field = hui.ui.SearchField.create({expandedWidth:300, name:'search'});
      hui.find('.js-search').appendChild(field.getElement());
    })
    hui.on(['hui.ui'],function() {
      hui.ui.listen({
        _ensureInfo : function() {
          if (!this._loaded) {
            this._loaded = true;
            hui.ui.request({
              url: 'info/components.json',
              $object : function(obj) {
                this.info = obj;
                this._updateResults();
              }.bind(this)
            })
          }
        },
        $valueChanged$search : function() {
          this._ensureInfo();
          this._updateResults();
        },
        _updateResults : function() {
          if (!this.info) return;
          var str = hui.ui.get('search').getValue();
          var words = str.split(/\W+/).filter(function(str) {return str.length>0});
          console.log(words)
          var found = [];
          this.info.forEach(function(obj) {
            var index = 1000;
            for (var i = 0; i < words.length; i++) {
              var x = obj.name.toLowerCase().indexOf(words[i]);
              if (x > -1) {
                index = Math.min(index, x);
              } else {
                return;
              }
            }
            if (index < 1000) {
              found.push({index: index, component: obj})
            }
          });
          var out = hui.find('.js-results');
          out.innerHTML = ''
          found.forEach(function(obj) {
            hui.build('a.result', {text: obj.component.name, parent: out, href: 'api/hui.ui.'+obj.component.name+'.html'})
          })
        }
      })
    });
  })
  </script>
  <script type="text/javascript" src="js/hui.js" async="async"></script>
  <script type="text/javascript" src="js/hui_animation.js" async="async"></script>
  <script type="text/javascript" src="js/hui_color.js" async="async"></script>
  <script type="text/javascript" src="js/ui.js" async="async"></script>
  <script type="text/javascript" src="js/SearchField.js" async="async"></script>
</body>
</html>
