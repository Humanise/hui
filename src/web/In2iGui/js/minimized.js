var N2i={};function $id(){var C=new Array();for(var B=0;B<arguments.length;B++){var A=arguments[B];if(typeof A=="string"){A=document.getElementById(A)}if(arguments.length==1){return A}C.push(A)}return C}function $class(D,A){var C=($id(A)||document.body).getElementsByTagName("*");var E=[];for(var B=0;B<C.length;B++){if(N2i.hasClass(C[B],D)){E[E.length]=C[B]}}return E}function $firstClass(D,A){var C=($id(A)||document.body).getElementsByTagName("*");for(var B=0;B<C.length;B++){if(N2i.hasClass(C[B],D)){return C[B]}}return null}function $tag(B,A){A=A?$id(A):document.body;return A.getElementsByTagName(B)}function $ani(A,C,D,E,B){if(N2i.Animation){N2i.Animation.get(A).animate(null,D,C,E,B)}}function $get(B,C,A){var D=new N2i.Request(C);D.request(B,A)}if(!Array.prototype.push){Array.prototype.push=function(){var B=this.length;for(var A=0;A<arguments.length;A++){this[B+A]=arguments[A]}return this.length}}N2i.override=function(B,A){if(A){for(prop in A){B[prop]=A[prop]}}};N2i.camelize=function(F){var D=F.split("-");if(D.length==1){return D[0]}var B=F.indexOf("-")==0?D[0].charAt(0).toUpperCase()+D[0].substring(1):D[0];for(var C=1,A=D.length;C<A;C++){var E=D[C];B+=E.charAt(0).toUpperCase()+E.substring(1)}return B};N2i.log=function(A){try{console.log(A)}catch(B){}};N2i.objToString=function(C,F){var D="";F=F|0;F+=2;if(typeof (C)=="object"){D+="{";for(var E in C){var B=C[E];if(B==null){B="null"}else{if(typeof (B)=="string"){B="'"+B+"'"}else{if(typeof (B)=="object"){B=N2i.objToString(B,F)}}}D+="\n";for(var A=0;A<F;A++){D+=" "}D+=E+" : "+B}D+="\n}"}else{D=C}return D};N2i.create=function(B,A,E,D){var C=document.createElement(B);if(A){for(attribute in A){if(attribute=="class"){C.className=A[attribute]}else{C.setAttribute(attribute,A[attribute])}}}if(E){for(style in E){C.style[style]=E[style]}}if(D){for(property in D){C[property]=D[property]}}return C};N2i.removeChildren=function(C){var B=C.childNodes;for(var A=B.length-1;A>=0;A--){C.removeChild(B[A])}};N2i.ELEMENT_NODE=1;N2i.ATTRIBUTE_NODE=2;N2i.TEXT_NODE=3;N2i.Element={};N2i.Element.removeClassName=N2i.removeClass=function(D,E){D=$id(D);if(!D){return }var B="";var A=D.className.split(" ");for(var C=0;C<A.length;C++){if(A[C]!=E){if(C>0){B+=" "}B+=A[C]}}D.className=B};N2i.Element.hasClassName=N2i.hasClass=function(C,D){C=$id(C);if(!C){return }alert;var A=C.className.split(/\s+/);for(var B=0;B<A.length;B++){if(A[B]==D){return true}}return false};N2i.Element.addClassName=N2i.addClass=function(A,B){A=$id(A);if(!A){return }N2i.Element.removeClassName(A,B);A.className+=" "+B};N2i.toggleClass=function(A,B){if(N2i.hasClass(A,B)){N2i.removeClass(A,B)}else{N2i.addClass(A,B)}};N2i.setClass=function(A,B,C){if(C){N2i.addClass(A,B)}else{N2i.removeClass(A,B)}};N2i.Element.scrollTo=function(A){A=$id(A);window.scrollTo(N2i.Element.getLeft(A),N2i.Element.getTop(A)-20)};N2i.Element.getLeft=N2i.getLeft=function(A){A=$id(A);if(A){xPos=A.offsetLeft;tempEl=A.offsetParent;while(tempEl!=null){xPos+=tempEl.offsetLeft;tempEl=tempEl.offsetParent}return xPos}else{return 0}};N2i.Element.getTop=N2i.getTop=function(A){A=$id(A);if(A){yPos=A.offsetTop;tempEl=A.offsetParent;while(tempEl!=null){yPos+=tempEl.offsetTop;tempEl=tempEl.offsetParent}return yPos}else{return 0}};N2i.Element.getWidth=N2i.getWidth=function(A){A=$id(A);return A.offsetWidth};N2i.Element.getHeight=N2i.getHeight=function(A){A=$id(A);return A.offsetHeight};N2i.Element.getRect=function(A){return{left:N2i.Element.getLeft(A),top:N2i.Element.getTop(A),width:N2i.Element.getWidth(A),height:N2i.Element.getHeight(A)}};N2i.Element.getStyle=N2i.getStyle=function(B,C){B=$id(B);var E=N2i.camelize(C);var D=B.style[E];if(!D){if(document.defaultView&&document.defaultView.getComputedStyle){var A=document.defaultView.getComputedStyle(B,null);D=A?A.getPropertyValue(C):null}else{if(B.currentStyle){D=B.currentStyle[E]}}}if(window.opera&&["left","top","right","bottom"].include(C)){if(N2i.Element.getStyle(B,"position")=="static"){D="auto"}}return D=="auto"?null:D};N2i.setOpacity=function(B,A){if(N2i.isIE()){alert(A);if(A==1){B.style["filter"]=null}else{B.style["filter"]="alpha(opacity="+(A*100)+")"}}else{B.style["opacity"]=A}};N2i.Window=function(){};N2i.Window.getScrollTop=function(){var A,B;if(self.pageYOffset){B=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){B=document.documentElement.scrollTop}else{if(document.body){B=document.body.scrollTop}}}return B};N2i.Window.getScrollLeft=function(){var A;if(self.pageYOffset){A=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){A=document.documentElement.scrollLeft}else{if(document.body){A=document.body.scrollLeft}}}return A};N2i.Window.getScrollPosition=function(){return{left:N2i.Window.getScrollLeft(),top:N2i.Window.getScrollTop()}};N2i.Window.getInnerHeight=function(){var A;if(self.innerHeight){A=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientHeight}else{if(document.body){A=document.body.clientHeight}}}return A};N2i.Window.getInnerWidth=function(){var A;if(self.innerHeight){A=self.innerWidth}else{if(document.documentElement&&document.documentElement.clientHeight){A=document.documentElement.clientWidth}else{if(document.body){A=document.body.clientWidth}}}return A};N2i.Window.getDocumentRect=function(){return{left:0,top:0,width:N2i.Window.getInnerWidth(),height:N2i.Window.getInnerHeight()}};N2i.Event=function(A){if(!A){this.event=window.event}else{this.event=A}};N2i.Event.prototype.mouseLeft=function(){var A=0;if(this.event){if(this.event.pageX){A=this.event.pageX}else{if(this.event.clientX){A=this.event.clientX+document.body.scrollLeft}}}return A};N2i.Event.prototype.isReturnKey=function(){return this.event.keyCode==13};N2i.Event.prototype.mouseTop=function(){var A=0;if(this.event){if(this.event.pageY){A=this.event.pageY}else{if(this.event.clientY){A=this.event.clientY+document.body.scrollTop}}}return A};N2i.Event.addListener=function(C,B,D,A){C=$id(C);if(document.addEventListener){if(!A){A=false}else{A=true}C.addEventListener(B,D,A)}else{C.attachEvent("on"+B,D)}};N2i.Event.removeListener=function(C,B,D,A){C=$id(C);if(document.removeEventListener){if(!A){A=false}else{A=true}C.removeEventListener(B,D,A)}else{C.detachEvent("on"+B,D)}};N2i.Event.stop=function(A){if(!A){var A=window.event}A.cancelBubble=true;if(A.stopPropagation){A.stopPropagation()}};N2i.Event.addLoadListener=function(A){if(typeof window.addEventListener!="undefined"){window.addEventListener("load",A,false)}else{if(typeof document.addEventListener!="undefined"){document.addEventListener("load",A,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onload",A)}else{if(typeof window.onload=="function"){var B=window.onload;window.onload=function(){B();A()}}else{window.onload=A}}}}};N2i.Location={};N2i.Location.getParameter=function(A){var C=N2i.Location.getParameters();for(var B=0;B<C.length;B++){if(C[B].name==A){return C[B].value}}return null};N2i.Location.setParameter=function(A,E){var C=N2i.Location.getParameters();var D=false;for(var B=0;B<C.length;B++){if(C[B].name==A){C[B].value=E;D=true;break}}if(!D){C.push({name:A,value:E})}N2i.Location.setParameters(C)};N2i.Location.setParameters=function(B){var C="";for(var A=0;A<B.length;A++){C+=A==0?"?":"&";C+=B[A].name+"="+B[A].value}document.location.search=C};N2i.Location.getBoolean=function(A){var B=N2i.Location.getParameter(A);return(B=="true"||B=="1")};N2i.Location.getParameters=function(){var B=document.location.search.substring(1).split("&");var A=[];for(var D=0;D<B.length;D++){var E=B[D].split("=");var C=unescape(E[0]).replace(/^\s*|\s*$/g,"");var F=unescape(E[1]).replace(/^\s*|\s*$/g,"");if(C){A.push({name:C,value:F})}}return A};N2i.Request=function(A){this.delegate=A;this.options={method:"GET",async:true}};N2i.Request.prototype.request=function(D,C){N2i.override(this.options,C);this.initTransport();var F=this.transport;var B=this;F.onreadystatechange=function(){try{if(F.readyState==4){if(F.status==200){B.callDelegate("onSuccess")}else{B.callDelegate("onFailure")}}}catch(H){N2i.log(H)}};var G=this.options.method.toUpperCase();F.open(G,D,this.options.async);var E=null;var A="";if(G=="POST"&&this.options.parameters){A=this.buildPostBody(this.options.parameters);F.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=utf-8");F.setRequestHeader("Content-length",A.length);F.setRequestHeader("Connection","close")}F.send(A)};N2i.Request.prototype.buildPostBody=function(B){if(!B){return null}var A="";for(param in B){if(A.length>0){A+="&"}A+=encodeURIComponent(param)+"="+encodeURIComponent(B[param])}return A};N2i.Request.prototype.callDelegate=function(A){if(this.delegate&&this.delegate[A]){this.delegate[A](this.transport)}};N2i.Request.prototype.initTransport=function(){this.transport=N2i.Request.createTransport()};N2i.Request.createTransport=function(){try{if(window.XMLHttpRequest){var B=new XMLHttpRequest();if(B.readyState==null){B.readyState=1;B.addEventListener("load",function(){B.readyState=4;if(typeof B.onreadystatechange=="function"){B.onreadystatechange()}},false)}return B}else{if(window.ActiveXObject){return N2i.Request.getActiveX()}else{this.delegate.onError(this)}}}catch(A){if(this.delegate.onError){this.delegate.onError(this,A)}}};N2i.Request.getActiveX=function(){var C=["MSXML2","Microsoft","MSXML","MSXML3"];var D;for(var B=0;B<C.length;B++){try{D=new ActiveXObject(C[B]+".XmlHttp");return D}catch(A){}}throw new Error("Could not find an installed XML parser")};N2i.inArray=function(A,C){for(var B=0;B<A.length;B++){if(A[B]==C){return true}}};N2i.flipInArray=function(A,B){if(N2i.inArray(A,B)){N2i.removeFromArray(A,B)}else{A.push(B)}};N2i.removeFromArray=function(A,C){for(var B=A.length-1;B>=0;B--){if(A[B]==C){A.splice(B,1)}}};N2i.addToArray=function(A,C){if(C.constructor==Array){for(var B=0;B<C.length;B++){if(!N2i.inArray(A,C[B])){A.push(C)}}}else{if(!N2i.inArray(A,C)){A.push(C)}}};N2i.Browser=function(){};N2i.Browser.isIE=N2i.isIE=function(){var B=navigator.userAgent;var A=/opera [56789]|opera\/[56789]/i.test(B);var C=!A&&/MSIE/.test(B);return C};N2i.Browser.isOpera=function(){return/opera [56789]|opera\/[56789]/i.test(navigator.userAgent)};if(!N2i){var N2i={}}N2i.Animation={objects:{},running:false,latestId:0,IE:navigator.userAgent.indexOf("MSIE")!=-1};N2i.Animation.loco=function(A){return Math.sin(3*A*Math.PI-Math.PI/2)*0.5+0.5};N2i.Animation.ease=function(A){return Math.sin(A*Math.PI-Math.PI/2)*0.5+0.5};N2i.Animation.func2=function(A){return(-1*Math.pow((A-1),2))+1};N2i.Animation.fastSlow=function(C){var B=0.5;var A=0.7;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(C,B)),Math.pow(Math.PI,A))+1};N2i.Animation.slowFastSlow=function(C){var B=1.6;var A=1.4;return -1*Math.pow(Math.cos((Math.PI/2)*Math.pow(C,B)),Math.pow(Math.PI,A))+1};N2i.Animation.bounce=function(A){if(A<(1/2.75)){return 7.5625*A*A}else{if(A<(2/2.75)){return(7.5625*(A-=(1.5/2.75))*A+0.75)}else{if(A<(2.5/2.75)){return(7.5625*(A-=(2.25/2.75))*A+0.9375)}else{return(7.5625*(A-=(2.625/2.75))*A+0.984375)}}}};N2i.Animation.elastic=function(A){return 1-N2i.Animation.elastic2(1-A)};N2i.Animation.elastic2=function(B,A,D){if(B<=0||B>=1){return B}if(!D){D=0.45}var C;if(!A||A<Math.abs(1)){A=1;C=D/4}else{C=D/(2*Math.PI)*Math.asin(1/A)}return -(A*Math.pow(2,10*(B-=1))*Math.sin((B-C)*(2*Math.PI)/D))};N2i.Animation.get=function(A){A=$id(A);if(!A.n2iAnimationId){A.n2iAnimationId=this.latestId++}if(!this.objects[A.n2iAnimationId]){this.objects[A.n2iAnimationId]=new N2i.Animation.Item(A)}return this.objects[A.n2iAnimationId]};N2i.Animation.start=function(){if(!this.running){N2i.Animation.render()}};N2i.Animation.render=function(F){this.running=true;var H=false;var A=new Date().getTime();for(id in this.objects){var E=this.objects[id];if(E.work){for(var G=0;G<E.work.length;G++){var J=E.work[G];if(J.finished){continue}var D=(A-J.start)/(J.end-J.start);if(isNaN(D)){D=1}if(D>1){D=1}if(D<1){H=true}var M=D;if(J.delegate&&J.delegate.ease){M=J.delegate.ease(M)}var L=null;if(!J.css){E.element[J.property]=Math.round(J.from+(J.to-J.from)*M)}else{if(J.to.red!=null){var B=Math.round(J.from.red+(J.to.red-J.from.red)*M);var C=Math.round(J.from.green+(J.to.green-J.from.green)*M);var K=Math.round(J.from.blue+(J.to.blue-J.from.blue)*M);L="rgb("+B+","+C+","+K+")";E.element.style[J.property]=L}else{if(N2i.Animation.IE&&J.property=="opacity"){var I=(J.from+(J.to-J.from)*M);E.element.style["filter"]="alpha(opacity="+(I*100)+")"}else{L=new String(J.from+(J.to-J.from)*M)+(J.unit!=null?J.unit:"");E.element.style[J.property]=L}}}if(D==1){J.finished=true;if(J.delegate&&J.delegate.onComplete){J.delegate.onComplete()}else{if(J.delegate&&J.delegate.hideOnComplete){E.element.style.display="none"}}}}}}if(H){window.setTimeout(function(){N2i.Animation.render()},0)}else{this.running=false}};N2i.Animation.parseStyle=function(D){var B={type:null,value:null,unit:null};var C;if(!isNaN(D)){B.value=parseFloat(D)}else{if(C=D.match(/([\-]?[0-9\.]+)(px|pt|%)/)){B.type="length";B.value=parseFloat(C[1]);B.unit=C[2]}else{if(C=D.match(/rgb\(([0-9]+),[ ]?([0-9]+),[ ]?([0-9]+)\)/)){B.type="color";B.value={red:parseInt(C[1]),green:parseInt(C[2]),blue:parseInt(C[3])}}else{var A=new N2i.Color(D);if(A.ok){B.value={red:A.r,green:A.g,blue:A.b}}}}}return B};N2i.Animation.Item=function(A){this.element=A;this.work=[]};N2i.Animation.Item.prototype.animate=function(H,I,J,B,F){var D=true;if(J=="scrollLeft"){D=false}var G=this.getWork(D?N2i.camelize(J):J);G.delegate=F;G.finished=false;G.css=D;if(H!=null){G.from=H}else{if(G.css&&N2i.Animation.IE&&J=="opacity"){G.from=this.getIEOpacity(this.element)}else{if(G.css){var A=N2i.Element.getStyle(this.element,J);var C=N2i.Animation.parseStyle(A);G.from=C.value}else{G.from=this.element[J]}}}if(G.css){var E=N2i.Animation.parseStyle(I);G.to=E.value;G.unit=E.unit}else{G.to=I;G.unit=null}G.start=new Date().getTime();G.end=G.start+B;N2i.Animation.start()};N2i.Animation.Item.prototype.getIEOpacity=function(B){var C=N2i.Element.getStyle(B,"filter").toLowerCase();var A;if(A=C.match(/opacity=([0-9]+)/)){return parseFloat(A[1])/100}else{return 1}};N2i.Animation.Item.prototype.getWork=function(C){for(var B=0;B<this.work.length;B++){if(this.work[B].property==C){return this.work[B]}}var A={property:C};this.work[this.work.length]=A;return A};N2i.Animation.Loop=function(A){this.recipe=A;this.position=-1;this.running=false};N2i.Animation.Loop.prototype.next=function(){this.position++;if(this.position>=this.recipe.length){this.position=0}var B=this.recipe[this.position];if(typeof (B)=="function"){B()}else{if(B.element){$ani(B.element,B.property,B.value,B.duration,{ease:B.ease})}}var A=this;var C=B.duration||0;window.setTimeout(function(){A.next()},C)};N2i.Animation.Loop.prototype.start=function(){this.running=true;this.next()};N2i.Color=function(G){this.ok=false;if(G.charAt(0)=="#"){G=G.substr(1,6)}G=G.replace(/ /g,"");G=G.toLowerCase();var A={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var C in A){if(G==C){G=A[C]}}var H=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(I){return[parseInt(I[1]),parseInt(I[2]),parseInt(I[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(I){return[parseInt(I[1],16),parseInt(I[2],16),parseInt(I[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(I){return[parseInt(I[1]+I[1],16),parseInt(I[2]+I[2],16),parseInt(I[3]+I[3],16)]}}];for(var B=0;B<H.length;B++){var E=H[B].re;var D=H[B].process;var F=E.exec(G);if(F){channels=D(F);this.r=channels[0];this.g=channels[1];this.b=channels[2];this.ok=true}}this.r=(this.r<0||isNaN(this.r))?0:((this.r>255)?255:this.r);this.g=(this.g<0||isNaN(this.g))?0:((this.g>255)?255:this.g);this.b=(this.b<0||isNaN(this.b))?0:((this.b>255)?255:this.b);this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var K=this.r.toString(16);var J=this.g.toString(16);var I=this.b.toString(16);if(K.length==1){K="0"+K}if(J.length==1){J="0"+J}if(I.length==1){I="0"+I}return"#"+K+J+I}};if(!N2i){var N2i={}}N2i.TextField=function(C,A,B){this.field=$id(C);this.value=this.field.value;this.options=A||{};this.delegate=B||{};if(this.options.placeholder&&this.field.value==""){this.field.value=this.options.placeholder}this.addBehaviour()};N2i.TextField.prototype.addBehaviour=function(){var A=this;this.field.onfocus=function(){A.onfocus()};this.field.onblur=function(){A.blur()};this.field.onkeydown=this.field.onkeyup=this.field.onkeypress=function(){A.key()}};N2i.TextField.prototype.setDelegate=function(A){this.delegate=A||{}};N2i.TextField.prototype.setEnabled=function(A){this.field.disabled=!A};N2i.TextField.prototype.getValue=function(){return this.value};N2i.TextField.prototype.setValue=function(A){A=A||"";this.value=this.field.value=A};N2i.TextField.prototype.focus=function(){this.field.focus()};N2i.TextField.prototype.onfocus=function(){if(this.field.value==this.options.placeholder){this.field.value=""}};N2i.TextField.prototype.blur=function(){if(this.field.value==""&&this.options.placeholder){this.field.value=this.options.placeholder}};N2i.TextField.prototype.key=function(){if(this.value!=this.field.value){this.value=this.field.value;if(this.delegate.valueDidChange){this.delegate.valueDidChange(this)}}};N2i.DateField=function(C,A,B){this.field=$id(C);this.value=this.field.value;this.date=null;this.inputFormats=["d-m-Y","d-m-Y","d-m-Y","d-m-Y","d-m","d/m","d","m-d-Y","m-d-Y","m-d-Y","m-d-Y","m-d","m/d"];this.outputFormat="d-m-Y";this.delegate=B||{};this.options=A||{};if(this.options.placeholder&&this.field.value==""){this.field.value=this.options.placeholder}this.addBehaviour();this.check()};N2i.DateField.prototype.setDelegate=function(A){this.delegate=A||{}};N2i.DateField.prototype.setEnabled=function(A){this.field.disabled=!A};N2i.DateField.prototype.setDate=function(A){this.date=A;this.field.value=this.date.dateFormat(this.outputFormat);this.value=this.field.value};N2i.DateField.prototype.getDate=function(){return this.date};N2i.DateField.prototype.addBehaviour=function(){var A=this;this.field.onfocus=function(){A.focus()};this.field.onblur=function(){A.blur()};this.field.onkeydown=this.field.onkeyup=this.field.onkeypress=function(){A.key()}};N2i.DateField.prototype.check=function(){var A=null;for(var B=0;B<this.inputFormats.length&&A==null;B++){A=Date.parseDate(this.value,this.inputFormats[B])}if(A){this.date=A}if(this.date==null){this.field.value=""}else{this.field.value=this.date.dateFormat(this.outputFormat)}this.value=this.field.value};N2i.DateField.prototype.getValue=function(){return this.value};N2i.DateField.prototype.focus=function(){if(this.field.value==this.options.placeholder){this.field.value=""}};N2i.DateField.prototype.blur=function(){this.check();if(this.field.value==""&&this.options.placeholder){this.field.value=this.options.placeholder}};N2i.DateField.prototype.key=function(){if(this.value!=this.field.value){this.value=this.field.value;if(this.options.valueDidChange){this.options.valueDidChange(this)}}};N2i.DateTimeField=function(B,A){this.field=$id(B);this.value=this.field.value;this.date=null;this.inputFormats=["d-m-Y H:i:s","d-m-Y H:i","d-m-Y H","d-m-Y","d-m","d/m"];this.outputFormat="d-m-Y H:i:s";this.delegate=A||{};if(this.delegate.placeholder&&this.field.value==""){this.field.value=this.delegate.placeholder}this.addBehaviour();this.check()};N2i.DateTimeField.prototype.addBehaviour=function(){var A=this;this.field.onfocus=function(){A.focus()};this.field.onblur=function(){A.blur()};this.field.onkeydown=this.field.onkeyup=this.field.onkeypress=function(){A.key()}};N2i.DateTimeField.prototype.check=function(){var A=null;for(var B=0;B<this.inputFormats.length&&A==null;B++){A=Date.parseDate(this.value,this.inputFormats[B])}if(A){this.date=A}this.field.value=this.date.dateFormat(this.outputFormat);this.value=this.field.value};N2i.DateTimeField.prototype.getValue=function(){return this.value};N2i.DateTimeField.prototype.focus=function(){if(this.field.value==this.delegate.placeholder){this.field.value=""}};N2i.DateTimeField.prototype.blur=function(){this.check();if(this.field.value==""&&this.delegate.placeholder){this.field.value=this.delegate.placeholder}};N2i.DateTimeField.prototype.key=function(){if(this.value!=this.field.value){this.value=this.field.value;if(this.delegate.valueDidChange){this.delegate.valueDidChange(this)}}};if(!this.JSON){JSON=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value,whitelist){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}if(typeof value.toJSON==="function"){return stringify(value.toJSON())}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i],whitelist)||"null")}return"["+a.join(",")+"]"}if(whitelist){l=whitelist.length;for(i=0;i<l;i+=1){k=whitelist[i];if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}else{for(k in value){if(typeof k==="string"){v=stringify(value[k],whitelist);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text,filter){var j;function walk(k,v){var i,n;if(v&&typeof v==="object"){for(i in v){if(Object.prototype.hasOwnProperty.apply(v,[i])){n=walk(i,v[i]);if(n!==undefined){v[i]=n}}}}return filter(k,v)}if(/^[\],:{}\s]*$/.test(text.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof filter==="function"?walk("",j):j}throw new SyntaxError("parseJSON")}}}()}function In2iGui(){this.overflows=[];this.delegates=[];this.objects={};this.addBehavior()}In2iGui.latestIndex=500;In2iGui.get=function(A){if(!In2iGui.instance){In2iGui.instance=new In2iGui()}if(A){return In2iGui.instance.objects[A]}else{return In2iGui.instance}};N2i.Event.addLoadListener(function(){In2iGui.get().ignite()});In2iGui.prototype.ignite=function(A){if(window.dwr){if(dwr&&dwr.engine&&dwr.engine.setErrorHandler){dwr.engine.setErrorHandler(function(B){alert(B)})}}this.resize();In2iGui.callSuperDelegates(this,"interfaceIsReady")};In2iGui.prototype.addBehavior=function(B){var A=this;N2i.Event.addListener(window,"resize",function(){A.resize()})};In2iGui.prototype.addDelegate=function(A){this.delegates[this.delegates.length]=A};In2iGui.prototype.getTopPad=function(A){var D=0;var B=parseInt(N2i.getStyle(A,"padding"));var C=parseInt(N2i.getStyle(A,"padding-top"));if(B){D+=B}if(C){D+=C}return D};In2iGui.prototype.getBottomPad=function(B){var D=0;var C=parseInt(N2i.getStyle(B,"padding"));var A=parseInt(N2i.getStyle(B,"padding-bottom"));if(C){D+=C}if(A){D+=A}return D};In2iGui.prototype.resize=function(C){var A=N2i.Window.getInnerHeight();for(var B=0;B<this.overflows.length;B++){this.overflows[B].element.style.height=A+this.overflows[B].diff+"px"}};In2iGui.prototype.registerOverflow=function(C,A){var B=$id(C);this.overflows.push({element:B,diff:A})};In2iGui.nextIndex=function(){In2iGui.latestIndex++;return In2iGui.latestIndex};In2iGui.prototype.showAlert=function(A){if(!this.alert){this.alert=In2iGui.Alert.create(A);var B=In2iGui.Button.create({text:"OK"});B.addDelegate({buttonWasClicked:function(){In2iGui.get().alert.hide()}});this.alert.addButton(B)}else{this.alert.update(A)}this.alert.show()};In2iGui.getIconUrl=function(B,A){return In2iGui.context+"In2iGui/icons/"+B+A+".png"};In2iGui.enableDelegating=function(A){if(A.name){In2iGui.get().objects[A.name]=A}A.delegates=[];A.addDelegate=function(B){this.delegates[this.delegates.length]=B}};In2iGui.callDelegates=function(E,F){var A=null;if(E.delegates){for(var C=0;C<E.delegates.length;C++){var D=E.delegates[C];if(E.name&&D[F+"$"+E.name]){thisResult=D[F+"$"+E.name](E)}else{if(E.kind&&D[F+"$"+E.kind]){thisResult=D[F+"$"+E.kind](E)}else{if(D[F]){thisResult=D[F](E)}}}if(A==null&&thisResult!=null&&typeof (thisResult)!="undefined"){A=thisResult}}}var B=In2iGui.callSuperDelegates(E,F);if(A==null&&B!=null){A=B}return A};In2iGui.callSuperDelegates=function(E,G){var B=In2iGui.get();var A=null;for(var C=0;C<B.delegates.length;C++){var D=B.delegates[C];var F=null;if(E.name&&D[G+"$"+E.name]){F=D[G+"$"+E.name](E)}else{if(E.kind&&D[G+"$"+E.kind]){F=D[G+"$"+E.kind](E)}else{if(D[G]){F=D[G](E)}}}if(A==null&&F!=null&&typeof (F)!="undefined"){A=F}}return A};In2iGui.dwrUpdate=function(){var C=arguments[0];var B={callback:function(D){In2iGui.handleDwrUpdate(D)}};var A=arguments.length;if(A==1){C(B)}else{if(A==2){C(arguments[1],B)}else{alert("Too many parameters")}}};In2iGui.handleDwrUpdate=function(C){var A=In2iGui.get();for(var B=0;B<C.length;B++){if(A.objects[C[B].name]){A.objects[C[B].name].updateFromObject(C[B])}}};In2iGui.update=function(A,B){var C={onSuccess:function(D){In2iGui.handleUpdate(D,B)}};$get(A,C)};In2iGui.handleUpdate=function(E,F){var A=In2iGui.get();var G=E.responseXML.firstChild;var D=G.childNodes;for(var C=0;C<D.length;C++){if(D[C].nodeType==1){var B=D[C].getAttribute("name");if(B&&B!=""&&A.objects[B]){A.objects[B].updateFromNode(D[C])}}}F.onSuccess()};In2iGui.jsonResponse=function(C,B){if(!C.responseXML||!C.responseXML.documentElement){if(C.responseText.length>0){var A=JSON.parse(C.responseText)}else{A=""}In2iGui.callDelegates(A,"success$"+B)}else{In2iGui.callDelegates(C,"success$"+B)}};In2iGui.json=function(D,C,B){if(typeof (B)=="string"){delegate={onSuccess:function(E){In2iGui.jsonResponse(E,B)}}}else{delegate=B}var A={method:"POST",parameters:{}};for(key in D){A.parameters[key]=JSON.stringify(D[key])}$get(C,delegate,A)};In2iGui.Window=function(A){this.element=$id(A);this.close=$firstClass("close",this.element);this.titlebar=$firstClass("titlebar",this.element);this.title=$firstClass("title",this.titlebar);In2iGui.enableDelegating(this);this.addBehavior()};In2iGui.Window.prototype.addBehavior=function(){var A=this;this.close.onclick=function(){A.hide()};this.titlebar.onmousedown=function(B){A.startDrag(B);return false}};In2iGui.Window.prototype.setTitle=function(A){this.title.innerHTML=A};In2iGui.Window.prototype.show=function(){this.element.style.zIndex=In2iGui.nextIndex();this.element.style.visibility="hidden";this.element.style.display="block";this.element.style.width=this.element.clientWidth+"px";this.element.style.visibility="visible";if(!N2i.isIE()){$ani(this.element,"opacity",1,0)}else{}};In2iGui.Window.prototype.hide=function(){if(!N2i.isIE()){$ani(this.element,"opacity",0,200,{hideOnComplete:true})}else{this.element.style.display="none"}};In2iGui.Window.prototype.startDrag=function(C){this.element.style.zIndex=In2iGui.nextIndex();var B=new N2i.Event(C);this.dragState={left:B.mouseLeft()-N2i.Element.getLeft(this.element),top:B.mouseTop()-N2i.Element.getTop(this.element)};this.latestPosition={left:this.dragState.left,top:this.dragState.top};this.latestTime=new Date().getMilliseconds();var A=this;this.moveListener=function(D){A.drag(D)};this.upListener=function(D){A.endDrag(D)};N2i.Event.addListener(document,"mousemove",this.moveListener);N2i.Event.addListener(document,"mouseup",this.upListener);N2i.Event.stop(C);document.body.onselectstart=function(){return false};return false};In2iGui.Window.prototype.calc=function(B,A){this.a=this.latestPosition.left-A;this.b=this.latestPosition.top-B;this.dist=Math.sqrt(Math.pow((this.a),2),Math.pow((this.b),2));this.latestTime=new Date().getMilliseconds();this.latestPosition={"top":B,"left":A}};In2iGui.Window.prototype.drag=function(D){var A=new N2i.Event(D);this.element.style.right="auto";var C=(A.mouseTop()-this.dragState.top);var B=(A.mouseLeft()-this.dragState.left);this.element.style.top=Math.max(C,0)+"px";this.element.style.left=Math.max(B,0)+"px";return false};In2iGui.Window.prototype.endDrag=function(A){N2i.Event.removeListener(document,"mousemove",this.moveListener);N2i.Event.removeListener(document,"mouseup",this.upListener);document.body.onselectstart=null};In2iGui.Formula=function(B,A){this.id=B;this.name=A;this.element=$id(B);this.inputs=[];this.addBehavior();In2iGui.enableDelegating(this)};In2iGui.Formula.create=function(C){var A={name:null};N2i.override(A,C);var B=N2i.create("form",{"class":"in2igui_formula"});return new In2iGui.Formula(B,A.name)};In2iGui.Formula.prototype.addBehavior=function(){var A=this;this.element.onsubmit=function(){In2iGui.callDelegates(A,"submit");return false}};In2iGui.Formula.prototype.getElement=function(){return this.element};In2iGui.Formula.prototype.registerInput=function(A){this.inputs[this.inputs.length]=A};In2iGui.Formula.prototype.getValues=function(){var B={};for(var A=0;A<this.inputs.length;A++){if(this.inputs[A].name){B[this.inputs[A].name]=this.inputs[A].getValue()}}return B};In2iGui.Formula.prototype.reset=function(){for(var A=0;A<this.inputs.length;A++){this.inputs[A].reset()}};In2iGui.Formula.prototype.addContent=function(A){this.element.appendChild(A)};In2iGui.Formula.Group=function(A,B,C){this.name=B;this.element=$id(A);this.options={above:true};N2i.override(this.options,C);In2iGui.enableDelegating(this)};In2iGui.Formula.Group.prototype.getElement=function(){return this.element};In2iGui.Formula.Group.create=function(C){var A={name:null};N2i.override(A,C);var B=N2i.create("table",{"class":"in2igui_formula_group"});return new In2iGui.Formula.Group(B,A.name,A)};In2iGui.Formula.Group.prototype.addWidget=function(C){var B=N2i.create("tr");this.element.appendChild(B);var A=N2i.create("th");A.appendChild(C.getLabel());B.appendChild(A);var D=N2i.create("td");D.appendChild(C.getElement());if(this.options.above){var B=N2i.create("tr");this.element.appendChild(B)}B.appendChild(D)};In2iGui.Formula.Text=function(A,C,B){this.name=C;this.options=B;this.element=$id(A);In2iGui.enableDelegating(this)};In2iGui.Formula.Text.create=function(C){var A={name:null,lines:1};N2i.override(A,C);if(A.lines>1){var B=N2i.create("textarea",{"class":"in2igui_formula_text","rows":A.lines})}else{var B=N2i.create("input",{"class":"in2igui_formula_text"})}return new In2iGui.Formula.Text(B,A.name,A)};In2iGui.Formula.Text.prototype.updateFromNode=function(A){if(A.firstChild){this.setValue(A.firstChild.nodeValue)}else{this.setValue(null)}};In2iGui.Formula.Text.prototype.updateFromObject=function(A){this.setValue(A.value)};In2iGui.Formula.Text.prototype.focus=function(){try{this.element.focus()}catch(A){}};In2iGui.Formula.Text.prototype.reset=function(){this.setValue("")};In2iGui.Formula.Text.prototype.setValue=function(A){this.element.value=A};In2iGui.Formula.Text.prototype.getValue=function(){return this.element.value};In2iGui.Formula.Text.prototype.getElement=function(){return this.element};In2iGui.Formula.Text.prototype.getLabel=function(){if(!this.label){this.label=N2i.create("label");this.label.innerHTML=this.options.label}return this.label};In2iGui.Formula.Radiobuttons=function(C,B,A){this.element=$id(C);this.name=B;this.radios=[];this.value=A.value;this.defaultValue=this.value;In2iGui.enableDelegating(this)};In2iGui.Formula.Radiobuttons.prototype={click:function(){this.value=!this.value;this.updateUI()},updateUI:function(){for(var B=0;B<this.radios.length;B++){var A=this.radios[B];N2i.setClass(A.id,"selected",A.value==this.value)}},setValue:function(A){this.value=A;this.updateUI()},getValue:function(){return this.value},reset:function(){this.setValue(this.defaultValue)},registerRadiobutton:function(B){this.radios.push(B);var C=$id(B.id);var A=this;C.onclick=function(){A.setValue(B.value)}}};In2iGui.Formula.Checkbox=function(C,B,A){this.element=$id(C);this.name=B;this.value=A.value=="true";In2iGui.enableDelegating(this);this.addBehavior()};In2iGui.Formula.Checkbox.prototype={addBehavior:function(){var B=$firstClass("check",this.element);var A=this;B.onclick=function(){A.click()}},click:function(){this.value=!this.value;this.updateUI()},updateUI:function(){N2i.setClass(this.element,"checked",this.value)},setValue:function(A){this.value=A;this.updateUI()},getValue:function(){return this.value},reset:function(){this.setValue(false)}};In2iGui.Formula.Checkboxes=function(B,A){this.element=$id(B);this.name=A;this.checkboxes=[];this.sources=[];this.values=[];In2iGui.enableDelegating(this)};In2iGui.Formula.Checkboxes.prototype.getValues=function(){return this.values};In2iGui.Formula.Checkboxes.prototype.checkValues=function(){var B=[];for(var C=0;C<this.values.length;C++){var E=this.values[C];var D=false;for(var A=0;A<this.sources.length;A++){D=D||this.sources[A].hasValue(E)}if(D){B.push(E)}}this.values=B};In2iGui.Formula.Checkboxes.prototype.setValues=function(A){this.values=A;this.checkValues();this.updateUI()};In2iGui.Formula.Checkboxes.prototype.flipValue=function(A){N2i.flipInArray(this.values,A);this.checkValues();this.updateUI()};In2iGui.Formula.Checkboxes.prototype.updateUI=function(){for(var A=0;A<this.sources.length;A++){this.sources[A].updateUI()}};In2iGui.Formula.Checkboxes.prototype.refresh=function(){for(var A=0;A<this.sources.length;A++){this.sources[A].refresh()}};In2iGui.Formula.Checkboxes.prototype.reset=function(){this.setValues([])};In2iGui.Formula.Checkboxes.prototype.registerSource=function(A){A.parent=this;this.sources.push(A)};In2iGui.Formula.Checkboxes.prototype.itemWasClicked=function(A){this.changeValue(A.in2iGuiValue)};In2iGui.Formula.Checkboxes.Source=function(D,C,B){this.element=$id(D);this.name=C;this.parent=null;this.options=B;this.checkboxes=[];In2iGui.enableDelegating(this);var A=this;N2i.Event.addLoadListener(function(){A.refresh()})};In2iGui.Formula.Checkboxes.Source.prototype.refresh=function(){var A=this;$get(this.options.url,{onSuccess:function(B){A.update(B.responseXML)}})};In2iGui.Formula.Checkboxes.Source.prototype.update=function(F){this.checkboxes=[];N2i.removeChildren(this.element);var I=this;var D=F.getElementsByTagName("checkbox");for(var C=0;C<D.length;C++){var H=D[C];var B=N2i.create("div",{"class":"checkbox"});var E=H.getAttribute("label");var G=H.getAttribute("value");var A=N2i.create("div",{"class":"check"});B.appendChild(A);B.appendChild(document.createTextNode(E));this.element.appendChild(B);B.in2iGuiValue=G;B.onclick=function(){I.itemWasClicked(this)};this.checkboxes.push({label:E,element:B,value:G})}if(D.length==0){this.element.innerHTML="&nbsp;"}this.parent.checkValues();this.updateUI()};In2iGui.Formula.Checkboxes.Source.prototype.itemWasClicked=function(A){this.parent.flipValue(A.in2iGuiValue)};In2iGui.Formula.Checkboxes.Source.prototype.updateUI=function(){for(var A=0;A<this.checkboxes.length;A++){var B=this.checkboxes[A];N2i.setClass(B.element,"checked",N2i.inArray(this.parent.values,B.value))}};In2iGui.Formula.Checkboxes.Source.prototype.hasValue=function(B){for(var A=0;A<this.checkboxes.length;A++){if(this.checkboxes[A].value==B){return true}}return false};In2iGui.List=function(C,B,A){this.element=$id(C);this.name=B;this.source=A.source;this.head=this.element.getElementsByTagName("thead")[0];this.body=this.element.getElementsByTagName("tbody")[0];this.columns=[];this.rows=[];this.selected=[];this.navigation=$class("navigation",this.element)[0];this.count=$class("count",this.navigation)[0];this.windowSize=$class("window_size",this.navigation)[0];this.windowNumber=$firstClass("window_number",this.navigation);this.windowNumberBody=$firstClass("window_number_body",this.navigation);this.window={size:null,number:1,total:0};if(A.windowSize!=""){this.window.size=parseInt(A.windowSize)}In2iGui.enableDelegating(this);this.refresh()};In2iGui.List.prototype.registerColumn=function(A){this.columns.push(A)};In2iGui.List.prototype.getSelection=function(){var A=[];for(var B=0;B<this.selected.length;B++){A.push(this.rows[this.selected[B]])}return A};In2iGui.List.prototype.getFirstSelection=function(){var A=this.getSelection();if(A.length>0){return A[0]}else{return null}};In2iGui.List.prototype.loadData=function(A){this.source=A;this.selected=[];this.window.number=0;this.refresh()};In2iGui.List.prototype.refresh=function(){if(!this.source){return }var A=this;var C={onSuccess:function(D){A.parse(D.responseXML)}};var B=this.source;if(this.window.number){B+=B.indexOf("?")==-1?"?":"&";B+="windowNumber="+this.window.number}if(this.window.size){B+=B.indexOf("?")==-1?"?":"&";B+="windowSize="+this.window.size}$get(B,C)};In2iGui.List.prototype.parse=function(G){this.parseWindow(G);this.buildNavigation();N2i.removeChildren(this.body);N2i.removeChildren(this.head);this.rows=[];var E=N2i.create("tr");var C=G.getElementsByTagName("header");for(var F=0;F<C.length;F++){var A=N2i.create("th");var B=C[F].getAttribute("width");if(B&&B!=""){A.style.width=B+"%"}A.appendChild(document.createTextNode(C[F].getAttribute("title")));E.appendChild(A)}this.head.appendChild(E);var L=G.getElementsByTagName("row");for(var F=0;F<L.length;F++){var J=L[F].getElementsByTagName("cell");var K=document.createElement("tr");for(var D=0;D<J.length;D++){var I=null;var H=document.createElement("td");this.parseCell(J[D],H);H.appendChild(document.createTextNode(I||" "));K.appendChild(H)}this.addRowBehavior(K,F);this.body.appendChild(K);this.rows.push({uid:L[F].getAttribute("uid"),kind:L[F].getAttribute("kind"),index:F})}};In2iGui.List.prototype.parseCell=function(D,A){if(D.getAttribute("icon")!=null){var C=N2i.create("div",{"class":"icon"},{"backgroundImage":'url("'+In2iGui.context+"In2iGui/icons/"+D.getAttribute("icon")+'1.png")'});A.appendChild(C)}for(var B=0;B<D.childNodes.length;B++){var F=D.childNodes[B];if(F.nodeType==N2i.TEXT_NODE&&F.nodeValue.length>0){A.appendChild(document.createTextNode(F.nodeValue))}else{if(F.nodeType==N2i.ELEMENT_NODE&&F.nodeName=="break"){A.appendChild(N2i.create("br"))}else{if(F.nodeType==N2i.ELEMENT_NODE&&F.nodeName=="object"){var E=N2i.create("div",{"class":"object"});if(F.getAttribute("icon")!=null){var C=N2i.create("div",{"class":"icon"},{"backgroundImage":'url("'+In2iGui.context+"In2iGui/icons/"+F.getAttribute("icon")+'1.png")'});E.appendChild(C)}if(F.firstChild&&F.firstChild.nodeType==N2i.TEXT_NODE&&F.firstChild.nodeValue.length>0){E.appendChild(document.createTextNode(F.firstChild.nodeValue))}A.appendChild(E)}}}}};In2iGui.List.prototype.parseWindow=function(B){var C=B.getElementsByTagName("window");if(C.length>0){var A=C[0];this.window.total=parseInt(A.getAttribute("total"));this.window.size=parseInt(A.getAttribute("size"));this.window.number=parseInt(A.getAttribute("number"))}else{this.window.total=0;this.window.size=0;this.window.number=0}};In2iGui.List.prototype.buildNavigation=function(E){var C=this;if(this.window.total==0){this.navigation.style.display="none";return }this.navigation.style.display="";var F=((this.window.number-1)*this.window.size+1);this.count.innerHTML=F+"-"+Math.min((this.window.number)*this.window.size,this.window.total)+"/"+this.window.total;this.windowNumberBody.innerHTML="";var A=Math.ceil(this.window.total/this.window.size);if(A<2){this.windowNumber.style.display="none"}else{for(var D=1;D<=A;D++){var B=document.createElement("a");B.appendChild(document.createTextNode(D));B.in2GuiNumber=D;B.onclick=function(){C.windowNumberWasClicked(this);return false};if(D==this.window.number){B.className="selected"}this.windowNumberBody.appendChild(B)}this.windowNumber.style.display="block"}};In2iGui.List.prototype.setObjects=function(D){this.selected=[];this.body.innerHTML="";this.rows=[];for(var C=0;C<D.length;C++){var F=N2i.create("tr");var E=D[C];for(var B=0;B<this.columns.length;B++){var A=N2i.create("td");if(this.builder){A.innerHTML=this.builder.buildColumn(this.columns[B],E)}else{A.innerHTML=E[this.columns[B].key]}F.appendChild(A)}this.body.appendChild(F);this.addRowBehavior(F,C);this.rows.push(E)}};In2iGui.List.prototype.addRowBehavior=function(C,B){var A=this;C.onmousedown=function(){A.rowDown(B);return false};C.ondblclick=function(){A.rowDoubleClick(B);return false}};In2iGui.List.prototype.changeSelection=function(A){var C=this.body.getElementsByTagName("tr");for(var B=0;B<this.selected.length;B++){N2i.Element.removeClassName(C[this.selected[B]],"selected")}for(var B=0;B<A.length;B++){N2i.Element.addClassName(C[A[B]],"selected")}this.selected=A};In2iGui.List.prototype.rowDown=function(A){this.changeSelection([A])};In2iGui.List.prototype.rowDoubleClick=function(A){In2iGui.callDelegates(this,"listRowsWasOpened")};In2iGui.List.prototype.windowNumberWasClicked=function(A){this.window.number=A.in2GuiNumber;this.refresh()};In2iGui.Icons=function(C,B,A){this.id=C;this.name=B;this.element=$id(C);this.source=A.source;In2iGui.enableDelegating(this)};In2iGui.Tabs=function(B,A){this.id=B;this.name=A;this.element=$id(B);this.activeTab=0;this.tabs=[];this.addBehavior();In2iGui.enableDelegating(this)};In2iGui.Tabs.prototype.registerTab=function(A){this.tabs[this.tabs.length]=A};In2iGui.Tabs.prototype.addBehavior=function(){var A=this;var C=$class("tabs_bar",this.element)[0].getElementsByTagName("span");for(var B=0;B<C.length;B++){C[B].in2iGuiIndex=B;C[B].onclick=function(){A.tabWasClicked(this)}}};In2iGui.Tabs.prototype.tabWasClicked=function(A){this.activeTab=A.in2iGuiIndex;this.updateGUI()};In2iGui.Tabs.prototype.updateGUI=function(){for(var A=0;A<this.tabs.length;A++){this.tabs[A].element.style.display=(A==this.activeTab?"block":"none")}};In2iGui.Tabs.Tab=function(B,A){this.id=B;this.name=A;this.element=$id(B);In2iGui.enableDelegating(this)};In2iGui.ViewStack=function(C,B,A){this.id=C;this.name=B;this.element=$id(C);this.contents=[];In2iGui.enableDelegating(this)};In2iGui.ViewStack.prototype.registerContent=function(B,A){this.contents[this.contents.length]={element:$id(B),name:A}};In2iGui.ViewStack.prototype.change=function(A){for(var B=0;B<this.contents.length;B++){if(this.contents[B].name==A){this.contents[B].element.style.display="block"}else{this.contents[B].element.style.display="none"}}};In2iGui.Tabbox=function(B,A){this.id=B;this.name=A;this.element=$id(B);this.panes=$class("tab",$class("tabbox_top",this.element)[0]);this.activeTab=0;this.tabs=[];this.addBehavior();this.updateGUI();In2iGui.enableDelegating(this)};In2iGui.Tabbox.prototype.registerTab=function(A){this.tabs[this.tabs.length]=A};In2iGui.Tabbox.prototype.addBehavior=function(){var A=this;var C=$class("tabbox_top",this.element)[0].getElementsByTagName("a");for(var B=0;B<C.length;B++){C[B].in2iGuiIndex=B;C[B].onclick=function(){A.tabWasClicked(this)}}};In2iGui.Tabbox.prototype.tabWasClicked=function(A){this.activeTab=A.in2iGuiIndex;this.updateGUI()};In2iGui.Tabbox.prototype.updateGUI=function(){var A=$class("tabbox_body",this.element)[0];$ani(A,"scrollLeft",this.activeTab*592,700,{ease:N2i.Animation.slowFastSlow});for(var B=0;B<this.panes.length;B++){if(B==this.activeTab){N2i.Element.addClassName(this.panes[B],"tab_selected")}else{N2i.Element.removeClassName(this.panes[B],"tab_selected")}}};In2iGui.Tabbox.Tab=function(B,A){this.id=B;this.name=A;this.element=$id(B);In2iGui.enableDelegating(this)};In2iGui.ObjectList=function(B,A){this.id=B;this.name=A;this.element=$id(B);this.body=this.element.getElementsByTagName("tbody")[0];this.template=[];this.objects=[];In2iGui.enableDelegating(this)};In2iGui.ObjectList.prototype.ignite=function(){this.addObject({id:0})};In2iGui.ObjectList.prototype.addObject=function(B,D){if(this.objects.length==0||D){var C=new In2iGui.ObjectList.Object(this.objects.length,B,this);this.objects.push(C);this.body.appendChild(C.getElement())}else{var A=this.objects.pop();var C=new In2iGui.ObjectList.Object(A.index,B,this);A.index++;this.objects.push(C);this.objects.push(A);this.body.insertBefore(C.getElement(),A.getElement())}};In2iGui.ObjectList.prototype.reset=function(){for(var B=0;B<this.objects.length;B++){var A=this.objects[B].getElement();A.parentNode.removeChild(A)}this.objects=[];this.addObject({id:0})};In2iGui.ObjectList.prototype.addObjects=function(B){for(var A=0;A<B.length;A++){this.addObject(B[A])}};In2iGui.ObjectList.prototype.setObjects=function(A){this.reset();this.addObjects(A)};In2iGui.ObjectList.prototype.getObjects=function(C){var B=[];for(var A=0;A<this.objects.length-1;A++){B.push(this.objects[A].getData())}return B};In2iGui.ObjectList.prototype.registerTemplateItem=function(A,B){this.template.push({key:A,type:B})};In2iGui.ObjectList.prototype.objectDidChange=function(A){if(A.index>=this.objects.length-1){this.addObject({},true)}};In2iGui.ObjectList.Object=function(A,C,B){this.data=C;this.index=A;this.list=B;this.fields={}};In2iGui.ObjectList.Object.prototype.getElement=function(){if(!this.element){var C=this;this.element=document.createElement("tr");for(var E=0;E<this.list.template.length;E++){var D=this.list.template[E].key;var A=document.createElement("td");if(E==0){A.className="first"}var B=N2i.create("input",{"class":"text"});var F=N2i.create("div",{"class":"field"});F.appendChild(B);A.appendChild(F);this.element.appendChild(A);var F=new N2i.TextField(B);F.in2iGuiObjectListKey=D;F.setValue(this.data[D]);F.setDelegate(this);this.fields[D]=F}}return this.element};In2iGui.ObjectList.Object.prototype.valueDidChange=function(A){this.data[A.in2iGuiObjectListKey]=A.getValue();this.list.objectDidChange(this)};In2iGui.ObjectList.Object.prototype.getData=function(){return this.data};In2iGui.Alert=function(A,B){this.element=$id(A);this.name=B;this.body=$class("in2igui_alert_body",this.element)[0];this.variant=null;var C=$tag("h1",this.element);this.title=C.length>0?C[0]:null;In2iGui.enableDelegating(this)};In2iGui.Alert.create=function(D){var B={title:"",text:"",name:null,variant:null,title:null};N2i.override(B,D);var C=N2i.create("div",{"class":"in2igui_alert"});var A=N2i.create("div",{"class":"in2igui_alert_body"});C.appendChild(A);document.body.appendChild(C);var E=new In2iGui.Alert(C);if(B.variant){E.setVariant(B.variant)}if(B.title){E.setTitle(B.title)}if(B.text){E.setText(B.text)}return E};In2iGui.Alert.prototype.show=function(){this.element.style.display="block";$ani(this.element,"opacity",1,200);$ani(this.element,"margin-top","40px",600,{ease:N2i.Animation.elastic})};In2iGui.Alert.prototype.hide=function(){$ani(this.element,"opacity",0,200,{hideOnComplete:true});$ani(this.element,"margin-top","0px",200)};In2iGui.Alert.prototype.setTitle=function(A){if(!this.title){this.title=N2i.create("h1");this.body.appendChild(this.title)}this.title.innerHTML=A};In2iGui.Alert.prototype.setText=function(A){if(!this.text){this.text=N2i.create("p");this.body.appendChild(this.text)}this.text.innerHTML=A};In2iGui.Alert.prototype.setVariant=function(A){if(this.variant){N2i.removeClass(this.body,this.variant)}this.variant=A;N2i.addClass(this.body,A)};In2iGui.Alert.prototype.update=function(A){if(A.title){this.setTitle(A.title)}if(A.text){this.setText(A.text)}if(A.variant){this.setVariant(A.variant)}};In2iGui.Alert.prototype.addButton=function(A){if(!this.buttons){this.buttons=N2i.create("div",{"class":"buttons"});this.body.appendChild(this.buttons)}this.buttons.appendChild(A.getElement())};In2iGui.Button=function(B,A){this.id=B;this.name=A;this.element=$id(B);this.enabled=true;In2iGui.enableDelegating(this);this.addBehavior()};In2iGui.Button.create=function(F){var A={text:"Button",name:null,highlighted:false};N2i.override(A,F);var D="in2igui_button"+(A.highlighted?" in2igui_button_highlighted":"");var B=N2i.create("span",{"class":D});var E=N2i.create("span");B.appendChild(E);var C=N2i.create("span");E.appendChild(C);C.innerHTML=A.text;return new In2iGui.Button(B,A.name)};In2iGui.Button.prototype.getElement=function(){return this.element};In2iGui.Button.prototype.addBehavior=function(){var A=this;this.element.onclick=function(){A.clicked()}};In2iGui.Button.prototype.clicked=function(){if(this.enabled){In2iGui.callDelegates(this,"buttonWasClicked");In2iGui.callDelegates(this,"click")}};In2iGui.Button.prototype.setEnabled=function(A){this.enabled=A;this.updateUI()};In2iGui.Button.prototype.updateUI=function(){N2i.setClass(this.element,"in2igui_button_disabled",!this.enabled)};In2iGui.Selection=function(D,B,C){this.element=$id(D);this.name=B;this.items=[];this.sources=[];this.value=null;this.selected=[];In2iGui.enableDelegating(this);var A=this};In2iGui.Selection.prototype.getValue=function(){return this.value};In2iGui.Selection.prototype.getSelection=function(){for(var A=0;A<this.items.length;A++){if(this.items[A].value==this.value){return this.items[A]}}for(var A=0;A<this.sources.length;A++){var B=this.sources[A].getSelection();if(B){return B}}};In2iGui.Selection.prototype.changeValue=function(D){this.value=D;for(var A=0;A<this.items.length;A++){var B=this.items[A];N2i.setClass(B.element,"selected",(B.value==D))}for(var A=0;A<this.sources.length;A++){var C=this.sources[A];C.updateUI()}In2iGui.callDelegates(this,"selectorSelectionChanged")};In2iGui.Selection.prototype.registerSource=function(A){A.selection=this;this.sources.push(A)};In2iGui.Selection.prototype.registerItem=function(G,F,D,A,E){var C=$id(G);C.in2iGuiValue=E;this.items.push({id:G,title:F,icon:D,badge:A,element:C,value:E,kind:""});var B=this;C.onclick=function(){B.itemWasClicked(this)}};In2iGui.Selection.prototype.itemWasClicked=function(A){this.changeValue(A.in2iGuiValue)};In2iGui.Selection.Source=function(D,C,B){this.element=$id(D);this.name=C;this.selection=null;this.options=B;this.items=[];In2iGui.enableDelegating(this);var A=this;N2i.Event.addLoadListener(function(){A.refresh()})};In2iGui.Selection.Source.prototype.refresh=function(){var A=this;$get(this.options.url,{onSuccess:function(B){A.updateSource(B.responseXML)}})};In2iGui.Selection.Source.prototype.updateSource=function(J){this.items=[];N2i.removeChildren(this.element);var L=this;var E=J.getElementsByTagName("item");for(var D=0;D<E.length;D++){var K=E[D];var A=N2i.create("div",{"class":"item"});var H=K.getAttribute("title");var F=K.getAttribute("badge");var G=K.getAttribute("icon");var I=K.getAttribute("value");var B=K.getAttribute("kind");if(G){var C=N2i.create("div",{"class":"icon"},{"backgroundImage":"url("+In2iGui.getIconUrl(G,1)+")"});A.appendChild(C)}A.appendChild(document.createTextNode(H));this.element.appendChild(A);A.in2iGuiValue=I;A.onclick=function(){L.itemWasClicked(this)};this.items.push({title:H,icon:G,badge:F,kind:B,element:A,value:I})}this.updateUI()};In2iGui.Selection.Source.prototype.itemWasClicked=function(A){this.selection.changeValue(A.in2iGuiValue)};In2iGui.Selection.Source.prototype.getSelection=function(){for(var A=0;A<this.items.length;A++){if(this.items[A].value==this.selection.value){return this.items[A]}}return null};In2iGui.Selection.Source.prototype.updateUI=function(){for(var A=0;A<this.items.length;A++){var B=this.items[A];N2i.setClass(B.element,"selected",(B.value==this.selection.value))}};In2iGui.Toolbar=function(A){this.element=$id(A)};In2iGui.Toolbar.Icon=function(B,A){this.id=B;this.name=A;this.enabled=true;this.element=$id(B);this.icon=$class("icon",this.element)[0];In2iGui.enableDelegating(this);this.addBehavior()};In2iGui.Toolbar.Icon.prototype={addBehavior:function(){var A=this;this.element.onclick=function(){A.wasClicked()}},setEnabled:function(A){this.enabled=A;N2i.setClass(this.element,"disabled",!this.enabled)},wasClicked:function(){if(this.enabled){In2iGui.callDelegates(this,"toolbarIconWasClicked");In2iGui.callDelegates(this,"click")}}};In2iGui.Toolbar.SearchField=function(A){this.element=$id(A);this.field=this.element.getElementsByTagName("input")[0];this.value=this.field.value;In2iGui.enableDelegating(this);this.addBehavior()};In2iGui.Toolbar.SearchField.prototype.getValue=function(){return this.field.value};In2iGui.Toolbar.SearchField.prototype.addBehavior=function(){var A=this;this.field.onkeyup=function(){A.fieldChanged()}};In2iGui.Toolbar.SearchField.prototype.fieldChanged=function(){if(this.field.value!=this.value){this.value=this.field.value;In2iGui.callDelegates(this,"searchFieldChanged")}}