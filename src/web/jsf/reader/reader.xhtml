<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:o="http://www.onlineobjects.com/jsf" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:gui="http://www.in2isoft.dk/in2igui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
>
	<ui:composition template="templates/plain.xhtml">
				
		<ui:define name="body">
			<div class="reader">
				<div class="reader_actions">
					<gui:button variant="light" text="Re-index" small="true" name="reindexButton"/>
					<gui:button variant="light" text="Remove" small="true" name="removeButton">
						<gui:confirm text="Are you sure?"/>
					</gui:button>
					<gui:button variant="light" text="Add..." small="true" name="addButton"/>
				</div>
				<o:header>Reader</o:header>
				
				<div>
					<gui:searchfield name="search" placeholder="Search" adaptive="true"/>
				</div>
				
				<gui:source name="listSource" url="#{wordsWordView.baseContext}/searchAddresses">
					<gui:parameter key="page" value="@list.window.page"/>
					<gui:parameter key="text" value="@search.value"/>
					<gui:parameter key="tags" value="@tags.value"/>
				</gui:source>
				<div class="reader_list">
					<gui:list name="list" source="listSource" variant="light"/>
				</div>
				<div id="viewer" class="reader_viewer">
					<div class="reader_viewer_frame">
						<div class="reader_viewer_info">
							<div id="info"></div>
							<a class="reader_viewer_close oo_icon oo_icon_close" href="javascript://"></a>
                            <div class="reader_viewer_view">
                                <a href="javascript://" class="reader_viewer_view_option reader_viewer_view_option-text reader_viewer_view_option-selected">Text</a>
                                <a href="javascript://" class="reader_viewer_view_option reader_viewer_view_option-web">Web</a>
                            </div>
						</div>
						<div id="rendering" class="reader_viewer_content"></div>
					</div>
				</div>
			</div>
		</ui:define>
		
		<ui:define name="sidebar">
		
			<gui:source name="tagSource" url="#{wordsWordView.baseContext}/getWordCloud">
			</gui:source>
		
			<gui:source name="feedSource" url="#{wordsWordView.baseContext}/getFeeds">
			</gui:source>
				
			<div class="sidebar">
				<div class="block reader_feeds">
					<h3>Feeds</h3>
    				<o:link name="addFeed" plain="true" styleClass="reader_feeds_add">
    					<o:icon icon="add"/>
    				</o:link>
					<o:selection name="feeds" source="feedSource"/>
				</div>
				<div class="block">
					<h3>Tags</h3>
					<o:selection name="tags" source="tagSource"/>
				</div>
			</div>
		</ui:define>

		<ui:define name="bottom">
			
			<gui:boundPanel name="newFeedPanel" variant="light" width="300" modal="true">
				<gui:formula name="newFeedForm">
					<gui:fields>
						<gui:field label="Address">
							<gui:textInput key="url"/>
						</gui:field>
					</gui:fields>
					<gui:buttons>
						<gui:button submit="true" text="Add" variant="light"/>
					</gui:buttons>
				</gui:formula>
			</gui:boundPanel>

			<gui:boundPanel name="wordPanel" variant="light" width="200" modal="true">
				<gui:fragment name="wordRendering"/>
				<gui:buttons align="right">
					<gui:button text="Remove" variant="light" small="true" name="removeWord"/>
				</gui:buttons>
			</gui:boundPanel>

			<gui:boundPanel name="addPanel" variant="light" width="300" modal="true">
				<gui:formula name="addForm">
					<gui:textInput key="url" multiline="true"/>
					<div style="padding: 5px 2px 2px 0">
						<gui:buttons>
							<gui:button text="Cancel" variant="light" name="cancelAddPanel" rendered="false"/>
							<gui:button submit="true" text="Add" variant="light"/>
						</gui:buttons>
					</div>
				</gui:formula>
			</gui:boundPanel>
			
			<ui:include src="../shared/wordfinder.xhtml"/>
			
		</ui:define>
		
	</ui:composition>
	
</html>