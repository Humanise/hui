<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:o="http://www.onlineobjects.com/jsf" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:gui="http://www.in2isoft.dk/in2igui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
>
	<ui:composition template="templates/plain.xhtml">
				
		<ui:define name="body">
			<div class="account">
				<h1 class="account_title">#{msg.account}</h1>
				<p class="account_user"><strong class="account_user_label">#{msg.username}:</strong> #{accountSettingsView.user.username}</p>

				<c:choose>
					<c:when test="#{accountSettingsView.allowed}">
						<gui:formula name="mailForm">
							<gui:field label="#{msg.primary_email}">
								<gui:textInput key="mail" value="#{accountSettingsView.primaryEmail}"/>
							</gui:field>
							<div style="margin: 5px 0 20px -2px">
								<gui:button text="#{msg.change}" submit="true" variant="paper"/>
							</div>
						</gui:formula>
						<gui:formula name="passwordForm">
							<gui:field label="#{msg.current_password}">
								<gui:textInput key="currentPassword" secret="true"/>
							</gui:field>
							<gui:field label="#{msg.new_password}">
								<gui:textInput key="newPassword" secret="true"/>
							</gui:field>
							<div style="margin: 5px 0 0 -2px">
								<gui:button text="#{msg.change_password}" submit="true" variant="paper"/>
							</div>
						</gui:formula>
						<p><textarea id="secret" class="account_secret">#{accountSettingsView.secret}</textarea></p>
						<p><gui:button text="#{msg.new_secret}" name="newSecret" variant="paper"/></p>
					</c:when>
					<c:otherwise>
						<p>Not allowed</p>
					</c:otherwise>
				</c:choose>
			</div>
			<o:script>
			hui.ui.listen(accountView);
			</o:script>
		</ui:define>
	
	</ui:composition>
	
</html>