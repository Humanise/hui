<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>HUI</title>
	<link charset="utf-8" title="front" media="screen" type="text/css" href="../../css/dev.css" rel="stylesheet" />
	<link charset="utf-8" title="front" media="screen" type="text/css" href="../../css/diagram.css" rel="stylesheet" />
	<!--[if lt IE 7]>
		<link rel="stylesheet" type="text/css" href="../../css/msie6.css"> </link>
	<![endif]-->
	<!--[if IE 7]>
		<link rel="stylesheet" type="text/css" href="../../css/msie7.css"> </link>
	<![endif]-->
	<script charset="utf-8" type="text/javascript" src="../../js/hui.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_animation.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_color.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/ui.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_require.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Drawing.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Button.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Window.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/CodeInput.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Diagram.js"></script>
	<script type="text/javascript" charset="utf-8">
		hui.ui.context='../../..';
	</script>
</head>

<body>
	<div id="container" style="border: 1px solid #eee;">
		
	</div>
	<script>
		hui.ui.listen({
			$ready : function() {
				var diagram = new hui.ui.Diagram.create({
					parent : hui.get('container'),
					layout : hui.location.getParameter('layout') || 'D3',
					height : 400
				});
				
				var data = {
					nodes : [
						{id:'jonas',type:'box',title:'Jonas Munk',properties:[{label:'Gender',value:'Male'}]},
						{id:'address',type:'box',title:'Home',properties:[{label:'Street',value:'H/F Sundbyvester'},{label:'City',value:'Copenhagen S'}]},
						{id:'info',type:'icon',icon:'common/info',title:'Infomation'},
						{id:'group',type:'icon',icon:'common/folder',title:'My stuff'},
						{id:'avatar',type:'icon',icon:'common/image',title:'Avatar'},
						{id:'images',type:'icon',icon:'application/photos',title:'Gallery'}
					],
					edges : [
						{from:'jonas',to:'info',label:'Vehicula Dolor'},
						{from:'jonas',to:'group',label:'Sit Ipsum Vulputate Ullamcorper Egestas'},
						{from:'jonas',to:'avatar',label:'Avatar',color:'#69f'},
						{from:'avatar',to:'group'},
						{from:'avatar',to:'images'},
						{from:'jonas',to:'address'}
					]
				};
				var json = JSON.stringify(data,null,4)	
				diagram.setData(data);
				
							
				var win = hui.ui.Window.create({width:600,title:'Data'});
				var code = hui.ui.CodeInput.create({value:json});
				code.listen({
					$valueChanged : function(str) {
						var obj = hui.string.fromJSON(str);
						if (obj) {
							diagram.setData(obj);
						}
					}
				})
				win.add(code);
				win.show();
				win.move({top:400,left:50})

				var logWin = hui.ui.Window.create({width:600,title:'Log'});
				var log = hui.ui.CodeInput.create();
				logWin.add(log);

				logWin.show();
				logWin.move({top:400,left:700})
				
				diagram.listen({
					$select : function(obj) {
						log.addLine('select :' + hui.string.toJSON(obj))
					},
					$open : function(obj) {
						log.addLine('open :' + hui.string.toJSON(obj))
					}
				})
			}
		})
	</script>
</body>
</html>
