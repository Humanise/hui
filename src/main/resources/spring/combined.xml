<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:util="http://www.springframework.org/schema/util"
  	xmlns:dwr="http://www.directwebremoting.org/schema/spring-dwr"
	xsi:schemaLocation="
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd
        http://www.directwebremoting.org/schema/spring-dwr
    	http://www.directwebremoting.org/schema/spring-dwr-2.0.xsd
    ">
    
    <import resource="core-remoting.xml"/>
    <import resource="core-scheduling.xml"/>
    <import resource="core-publishing.xml"/>
    <import resource="core-jobs.xml"/>
    <import resource="core-services.xml"/>
    <import resource="module-language.xml"/>
    <import resource="module-synchronization.xml"/>
    <import resource="module-networking.xml"/>
    <import resource="module-images.xml"/>
    <import resource="module-onlinepublisher.xml"/>
    <import resource="module-organic.xml"/>
    <import resource="module-inbox.xml"/>
    <import resource="app-videosharing.xml"/>
    <import resource="app-setup.xml"/>
    <import resource="app-community.xml"/>
    <import resource="app-developer.xml"/>
    <import resource="app-desktop.xml"/>
    <import resource="app-words.xml"/>
    <import resource="app-photos.xml"/>
    <import resource="app-account.xml"/>
    <import resource="app-tools.xml"/>
    <import resource="app-front.xml"/>
    <import resource="app-people.xml"/>
    <import resource="app-api.xml"/>
    <import resource="app-reader.xml"/>

	<bean id="configurationService" class="dk.in2isoft.onlineobjects.services.ConfigurationService" autowire="byType">
		<property name="basePath" value="${basePath}"/>
		<property name="storagePath" value="${storagePath}"/>
		<property name="baseUrl" value="${baseUrl}"/>
		<property name="port" value="${port}"/>
		<property name="rootDomain" value="${rootDomain}"/>
		<property name="developmentMode" value="${developmentMode}"/>
		<property name="developmentUser" value="${development.user}"/>
		<property name="imageMagickPath" value="${imagemagick.path}"/>
		<property name="graphvizPath" value="${graphviz.path}"/>
		<property name="analyticsCode" value="${analytics.code}"/>
		<property name="startScheduling" value="${startScheduling}"/>
	</bean>

	<bean id="emailService" class="dk.in2isoft.onlineobjects.services.EmailService" autowire="byType">

		<property name="host" value="${email.host}" />
		<property name="username" value="${email.username}" />
		<property name="password" value="${email.password}" />
		<property name="defaultSenderAddress" value="${email.defaultSenderAddress}" />
		<property name="defaultSenderName" value="${email.defaultSenderName}" />

	</bean>

	<bean id="passwordRecoveryService" class="dk.in2isoft.onlineobjects.services.PasswordRecoveryService">
	
		<property name="emailService" ref="emailService" />
		<property name="modelService" ref="modelService" />
		<property name="configurationService" ref="configurationService"/>
	
	</bean>

	<bean id="modelService" class="dk.in2isoft.onlineobjects.core.ModelService" autowire="byType"/>
	
	<bean id="storageService" class="dk.in2isoft.onlineobjects.services.StorageService" autowire="byType"/>
	
	<bean id="securityService" class="dk.in2isoft.onlineobjects.core.SecurityService" autowire="byType"/>
	
	<bean id="passwordEncryptionService" class="dk.in2isoft.onlineobjects.core.PasswordEncryptionService" autowire="byType"/>
	
	<bean id="lifeCycleService" class="dk.in2isoft.onlineobjects.services.LifeCycleService"/>
	
	<bean id="eventService" class="dk.in2isoft.onlineobjects.core.events.EventService" autowire="byType"/>
	
	<bean id="conversionService" class="dk.in2isoft.onlineobjects.services.ConversionService"/>
	
	
	<bean id="webModelService" class="dk.in2isoft.onlineobjects.services.WebModelService" autowire="byType"/>
	
	<bean id="dispatchingService" class="dk.in2isoft.onlineobjects.services.DispatchingService" autowire="byType">
		<property name="responders">
			<util:list>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.SharedFilesResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.DWRResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.FacesResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.CoreFilesResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.In2iGuiResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.ServicesResponder" autowire="byType"/>
				<bean class="dk.in2isoft.onlineobjects.modules.dispatch.ApplicationResponder" autowire="byType"/>
			</util:list>
		</property>
	</bean>
	
	<bean id="surveillanceService" class="dk.in2isoft.onlineobjects.modules.surveillance.SurveillanceService" autowire="byType"/>
	
	<bean id="schedulingSupportFacade" class="dk.in2isoft.onlineobjects.modules.scheduling.SchedulingSupportFacade" autowire="byType"/>

	<bean id="schedulingService" class="dk.in2isoft.onlineobjects.modules.scheduling.SchedulingService" autowire="byType"/>
	
	<bean id="importService" class="dk.in2isoft.onlineobjects.services.ImportService" autowire="byType"/>
	
	<bean id="fileService" class="dk.in2isoft.onlineobjects.services.FileService" autowire="byType"/>
	
	<bean id="graphService" class="dk.in2isoft.onlineobjects.services.GraphService" autowire="byType"/>
	
	<bean id="semanticService" class="dk.in2isoft.onlineobjects.services.SemanticService" autowire="byType"/>
	
	<bean id="indexService" class="dk.in2isoft.onlineobjects.modules.index.IndexService" autowire="byType"/>
	
	<bean id="remoteDataService" class="dk.in2isoft.onlineobjects.services.RemoteDataService" autowire="byType"/>
	<bean id="personService" class="dk.in2isoft.onlineobjects.services.PersonService" autowire="byType"/>
	
	<bean id="feedService" class="dk.in2isoft.onlineobjects.services.FeedService" autowire="byType"/>
	<bean id="ratingService" class="dk.in2isoft.onlineobjects.services.RatingService" autowire="byType"/>
	
	<bean id="videoService" class="dk.in2isoft.onlineobjects.modules.video.VideoService" autowire="byType"/>
	<bean id="youTubeService" class="dk.in2isoft.onlineobjects.modules.youtube.YouTubeService" autowire="byType"/>
	
	<bean id="localizationService" class="dk.in2isoft.onlineobjects.modules.localization.LocalizationService" autowire="byType"/>
	
	<bean id="userService" class="dk.in2isoft.onlineobjects.modules.user.UserService" autowire="byType"/>
	
	<bean id="dictionaryService" class="dk.in2isoft.onlineobjects.services.DictionaryService" autowire="byType"/>
	
	<bean id="consistencyService" class="dk.in2isoft.onlineobjects.services.ConsistencyService" autowire="byType"/>

	<bean id="sessionService" class="dk.in2isoft.onlineobjects.services.SessionService" autowire="byType"/>

	<bean id="informationService" class="dk.in2isoft.onlineobjects.modules.information.InformationService" autowire="byType"/>
	
	<bean id="pileService" class="dk.in2isoft.onlineobjects.services.PileService" autowire="byType"/>

	
	<!-- Tools -->
	
	<bean id="velocityEngine" class="org.springframework.ui.velocity.VelocityEngineFactoryBean">
      <property name="velocityProperties">
         <value>
            resource.loader=file
            file.resource.loader.class=org.apache.velocity.runtime.resource.loader.ClasspathResourceLoader
            file.resource.loader.path=/Users/jbm/Development/Workspace/onlineobjects/src/web/
         </value>
      </property>
   </bean>	
	
	
</beans>