<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
	<title>HUI</title>
	<link charset="utf-8" title="front" media="screen" type="text/css" href="../../css/dev.css" rel="stylesheet" />
	<link charset="utf-8" title="front" media="screen" type="text/css" href="../../css/diagram.css" rel="stylesheet" />
	<!--[if lt IE 7]>
		<link rel="stylesheet" type="text/css" href="../../css/msie6.css"> </link>
	<![endif]-->
	<!--[if IE 7]>
		<link rel="stylesheet" type="text/css" href="../../css/msie7.css"> </link>
	<![endif]-->
	<script charset="utf-8" type="text/javascript" src="../../js/hui.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_animation.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_color.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/ui.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/hui_require.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Drawing.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Button.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Window.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/CodeInput.js"></script>
	<script charset="utf-8" type="text/javascript" src="../../js/Diagram.js"></script>
	<script type="text/javascript" charset="utf-8">
		hui.ui.context='../../..';
        if (hui.location.getBoolean('debug')) {
            console.profile();
            window.setTimeout(function() {
                console.profileEnd();
            },5000);        
        }
	</script>
</head>

<body>
	<button onclick="hui.ui.get('diagram').resume()">Resume</button>
	<div id="container" style="border: 1px solid #eee; margin: 50px">
		
	</div>
	<script>
		hui.ui.listen({
			$ready : function() {
				var diagram = new hui.ui.Diagram.create({
					name : 'diagram',
					parent : hui.get('container'),
					//layout : hui.location.getParameter('layout') || 'Arbor',
					height : 800
				});
				
				var tmp = [];
				
				var data = {
					nodes : [
					],
					edges : [
					]
				};
				
				var num = 50;
				
				for (var i=0; i < num; i++) {
					data.nodes.push({id:i+'',type:'box',title:i,properties:[{label:'ID',value:i}]});
				};
				for (var i=0; i < num*2; i++) {
					data.edges.push({
						from : Math.round(Math.random()*(num-1))+'', 
						to : Math.round(Math.random()*(num-1))+'',
						label : i
					});
				}
				
				
				var json = JSON.stringify(data,null,4)	
				diagram.setData(data);
				
							
				var win = hui.ui.Window.create({width:600,title:'Data'});
				var code = hui.ui.CodeInput.create({value:json});
				code.listen({
					$valueChanged : function(str) {
						var obj = hui.string.fromJSON(str);
						if (obj) {
							diagram.setData(obj);
						}
					}
				})
				win.add(code);
				/*win.show();
				win.move({top:400,left:50})*/

				var logWin = hui.ui.Window.create({width:600,title:'Log'});
				var log = hui.ui.CodeInput.create();
				logWin.add(log);
                /*
				logWin.show();
				logWin.move({top:400,left:700})
				*/
				diagram.listen({
					$select : function(obj) {
						log.setValue(obj)
					}
				})
			}
		})
	</script>
</body>
</html>
