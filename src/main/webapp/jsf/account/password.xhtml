<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:o="http://www.onlineobjects.com/jsf" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:gui="http://www.in2isoft.dk/in2igui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
>

	<ui:composition template="templates/plain.xhtml">
		
		<ui:define name="body">
      <span id="js-account-data" data-key="#{accountPasswordView.key}"></span>

			<o:box width="500" margin="20" padding="20">
				<h1 class="account_title">Change your password</h1>
				<c:choose>
					<c:when test="#{accountPasswordView.found}">
						<div style="font-size: 11pt">
							<p>Hi #{accountPasswordView.user.username}.</p>
							<p>You can now change your password. To keep you safe, your new password need to follow these rules:</p>
							<ul>
								<li>must be <strong>8 characters</strong> long</li>
								<li>must contain one or more <strong>numbers</strong></li>
								<li>must contain one or more <strong>special characters</strong></li>
							</ul>
						</div>
						<gui:formula name="resetPasswordForm">
							<gui:field label="#{msg.new_password}">
								<gui:textInput key="password" secret="true"/>
							</gui:field>
							<gui:field label="#{msg.repeat_new_password}">
								<gui:textInput key="passwordAgain" secret="true"/>
							</gui:field>
							<div style="margin: 5px 0 0 -2px">
								<gui:button text="#{msg.change_password}" submit="true" variant="paper"/>
							</div>
						</gui:formula>
					</c:when>
					<c:otherwise>
						<p>You are too late! Please request a new recovery.</p>
					</c:otherwise>
				</c:choose>
			</o:box>

      <o:dependency src="/WEB-INF/apps/account/web/js/password.js"/>
		</ui:define>
	
	</ui:composition>
	
</html>