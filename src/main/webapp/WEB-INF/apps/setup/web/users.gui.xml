<?xml version="1.0" encoding="UTF-8"?>
<gui xmlns="uri:hui" title="Indstillinger" padding="10">	
	<controller source="users.js"/>
	
	<source name="listSource" url="listUsers">
		<parameter key="page" value="@list.window.page"/>
		<parameter key="search" value="@search.value"/>
	</source>

	<source name="listObjectsSource" url="listUsersObjects">
		<parameter key="page" value="@objectsList.window.page"/>
		<parameter key="userId" value="@list.selection.id"/>
	</source>

	<structure>
		<top>
			<toolbar>
				<icon icon="common/new" text="Add member" name="newMember"/>
				<right>
					<field label="Search">
						<searchfield name="search" expanded-width="200"/>
					</field>
				</right>
			</toolbar>
		</top>
		<middle>
			<left>
				<overflow>
					<selection value="dk.in2isoft.onlineobjects.model.Entity" name="selection">
						<item icon="common/user" title="All users" value="dk.in2isoft.onlineobjects.model.Entity"/>
					</selection>
				</overflow>
			</left>
			<center>
				<split>
					<row>
						<overflow>
							<list name="list" source="listSource"/>
						</overflow>
					</row>
					<row>
						<overflow>
							<list name="objectsList" source="listObjectsSource"/>
						</overflow>
					</row>
				</split>
			</center>
		</middle>
		<bottom/>
	</structure>
	
	<window name="userEditor" title="User" padding="5" width="300">
		<formula name="userFormula">
			<fields>
				<field label="Name:">
					<text-input key="name"/>
				</field>
				<field label="Username:">
					<text-input key="username"/>
				</field>
				<field label="Privileges">
					<checkbox name="publicView" label="View" right="10"/>
					<checkbox name="publicModify" label="Modify" right="10"/>
					<checkbox name="publicDelete" label="Delete"/>
				</field>
			</fields>
			<buttons top="10">
				<button title="Cancel" name="cancelUser"/>
				<button title="Delete" name="deleteUser">
					<confirm text="Are you sure?" ok="Yes, delete" cancel="No"/>
				</button>
				<button title="Update" name="saveUser" highlighted="true"/>
			</buttons>
		</formula>
	</window>

	<window name="memberWindow" title="New member" padding="5" width="300">
		<formula name="memberFormula">
			<fields>
				<field label="Name:">
					<text-input key="name"/>
				</field>
				<field label="E-mail:">
					<text-input key="email"/>
				</field>
				<field label="Username:">
					<text-input key="username"/>
				</field>
				<field label="Password:">
					<text-input key="password" secret="true"/>
				</field>
			</fields>
			<buttons top="10">
				<button title="Cancel" name="cancelMember"/>
				<button title="Create" submit="true" highlighted="true"/>
			</buttons>
		</formula>
	</window>

</gui>